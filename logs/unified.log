=== Log session started at 2026-01-16T17:16:51.206017 ===
2026-01-16 17:16:51.264 [BA] [INFO] [general] app.main: Serving frontend from: D:\Documents\GitHub\python\nce-english-practices\frontend\dist
2026-01-16 17:16:51.527 [BA] [ERRO] [function] app.api.routers.voice_lab: Config Error: DB_PASSWORD_IS_12345
Traceback (most recent call last):
  File "D:\Documents\GitHub\python\nce-english-practices\app\api\routers\voice_lab.py", line 16, in get_config
    return voice_lab_service.get_all_configs()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ahggg\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py", line 1124, in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ahggg\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py", line 1128, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ahggg\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py", line 1183, in _execute_mock_call
    raise effect
Exception: DB_PASSWORD_IS_12345
2026-01-16 17:16:51.539 [BA] [INFO] [network] httpx: HTTP Request: GET http://testserver/api/voice-lab/config "HTTP/1.1 500 Internal Server Error"
2026-01-16 17:16:51.979 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/api/performance?days=30 "HTTP/1.1 200 OK"
2026-01-16 17:16:51.986 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/voice/token "HTTP/1.1 200 OK"
2026-01-16 17:16:55.358 [BA] [INFO] [lifecycl] app.services.aui_input: Using direct memory dispatch for session test-session-1 (Fallback/Test)
2026-01-16 17:16:55.359 [BA] [INFO] [lifecycl] app.services.aui_input: Persisted input for session test-session-1
2026-01-16 17:16:55.479 [BA] [WARN] [lifecycl] app.services.aui_input: Timeout waiting for input on session test-session-timeout
2026-01-16 17:16:55.603 [BA] [INFO] [lifecycl] app.services.aui_input: Using direct memory dispatch for session session-1 (Fallback/Test)
2026-01-16 17:16:55.604 [BA] [INFO] [lifecycl] app.services.aui_input: Persisted input for session session-1
2026-01-16 17:16:55.709 [BA] [WARN] [lifecycl] app.services.aui_input: Timeout waiting for input on session session-2
2026-01-16 17:17:13.597 [BA] [INFO] [lifecycl] app.api.routers.aui_websocket: WebSocket connected: stream_type=story
2026-01-16 17:17:13.764 [BA] [INFO] [lifecycl] app.api.routers.aui_websocket: WebSocket connected: stream_type=activity
2026-01-16 17:17:18.934 [BA] [INFO] [lifecycl] app.api.routers.aui_websocket: WebSocket connected: stream_type=tool-call
2026-01-16 17:17:20.984 [BA] [INFO] [lifecycl] app.api.routers.aui_websocket: WebSocket connected: stream_type=agent-run
2026-01-16 17:17:23.624 [BA] [INFO] [lifecycl] app.api.routers.aui_websocket: WebSocket connected: stream_type=multi-messages
2026-01-16 17:17:28.504 [BA] [INFO] [lifecycl] app.api.routers.aui_websocket: WebSocket connected: stream_type=invalid-type
2026-01-16 17:17:28.613 [BA] [INFO] [lifecycl] app.api.routers.aui_websocket: WebSocket connected: stream_type=vocabulary
2026-01-16 17:17:28.615 [BA] [INFO] [network] app.api.routers.aui_websocket: Received params: {'words': ['test', 'example'], 'user_level': 2}
2026-01-16 17:17:30.139 [BA] [INFO] [lifecycl] app.api.routers.aui_websocket: WebSocket connected: stream_type=activity
2026-01-16 17:17:30.261 [BA] [INFO] [lifecycl] app.api.routers.aui_websocket: WebSocket connected: stream_type=story
2026-01-16 17:17:30.432 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/docs "HTTP/1.1 200 OK"
2026-01-16 17:17:30.648 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/ "HTTP/1.1 200 OK"
2026-01-16 17:17:30.669 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/api/performance "HTTP/1.1 200 OK"
2026-01-16 17:17:30.683 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/api/books/ "HTTP/1.1 200 OK"
2026-01-16 17:17:30.695 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/api/books/test_api_book "HTTP/1.1 200 OK"
2026-01-16 17:17:30.710 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/api/books/test_api_book/next "HTTP/1.1 200 OK"
2026-01-16 17:17:30.723 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/api/books/unknown_book/next "HTTP/1.1 404 Not Found"
2026-01-16 17:17:31.330 [BA] [INFO] [network] httpx: HTTP Request: POST https://api.deepseek.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-16 17:17:37.220 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/dictionary/lookup "HTTP/1.1 200 OK"
2026-01-16 17:17:37.232 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/dictionary/context "HTTP/1.1 200 OK"
2026-01-16 17:17:37.239 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/dictionary/context "HTTP/1.1 200 OK"
2026-01-16 17:17:37.247 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/dict/resource?path=image.png "HTTP/1.1 200 OK"
2026-01-16 17:17:37.254 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/dict/resource?path=unknown.png "HTTP/1.1 404 Not Found"
2026-01-16 17:17:37.659 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/api/reading/epub/books "HTTP/1.1 200 OK"
2026-01-16 17:17:37.667 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/api/reading/epub/books "HTTP/1.1 200 OK"
2026-01-16 17:18:16.250 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/api/negotiation/next-content?book=test_int_book "HTTP/1.1 200 OK"
2026-01-16 17:18:16.259 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/api/negotiation/next-content "HTTP/1.1 200 OK"
2026-01-16 17:18:16.361 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/review/complete "HTTP/1.1 200 OK"
2026-01-16 17:18:16.395 [BA] [WARN] [general] app.services.content_providers.epub_provider: Path traversal attempt detected: ../../dummy_outside.epub
2026-01-16 17:18:16.399 [BA] [WARN] [general] app.services.content_providers.epub_provider: Path traversal attempt detected: C:\Users\ahggg\AppData\Local\Temp\tmp1izvbv34.epub
2026-01-16 17:18:16.404 [BA] [ERRO] [network] app.services.content_providers.epub_provider: Error loading EPUB valid_test.epub
Traceback (most recent call last):
  File "D:\Documents\GitHub\python\nce-english-practices\.venv\Lib\site-packages\ebooklib\epub.py", line 1755, in _load
    self.zf = zipfile.ZipFile(self.file_name, "r", compression=zipfile.ZIP_DEFLATED, allowZip64=True)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ahggg\AppData\Local\Programs\Python\Python311\Lib\zipfile.py", line 1302, in __init__
    self._RealGetContents()
  File "C:\Users\ahggg\AppData\Local\Programs\Python\Python311\Lib\zipfile.py", line 1369, in _RealGetContents
    raise BadZipFile("File is not a zip file")
zipfile.BadZipFile: File is not a zip file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Documents\GitHub\python\nce-english-practices\app\services\content_providers\epub_provider.py", line 60, in _load_epub
    book = epub.read_epub(str(filepath))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Documents\GitHub\python\nce-english-practices\.venv\Lib\site-packages\ebooklib\epub.py", line 1817, in read_epub
    book = reader.load()
           ^^^^^^^^^^^^^
  File "D:\Documents\GitHub\python\nce-english-practices\.venv\Lib\site-packages\ebooklib\epub.py", line 1463, in load
    self._load()
  File "D:\Documents\GitHub\python\nce-english-practices\.venv\Lib\site-packages\ebooklib\epub.py", line 1757, in _load
    raise EpubException(0, "Bad Zip file")  # noqa: B904
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ebooklib.epub.EpubException: 'Bad Zip file'
2026-01-16 17:18:16.420 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/sentence-study/record "HTTP/1.1 200 OK"
2026-01-16 17:18:16.436 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/sentence-study/record "HTTP/1.1 200 OK"
2026-01-16 17:18:16.449 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/sentence-study/record "HTTP/1.1 200 OK"
2026-01-16 17:18:16.460 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/sentence-study/record "HTTP/1.1 200 OK"
2026-01-16 17:18:16.473 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/sentence-study/record "HTTP/1.1 200 OK"
2026-01-16 17:18:16.482 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/api/sentence-study/epub:empty-test.epub:1/progress "HTTP/1.1 200 OK"
2026-01-16 17:18:16.494 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/sentence-study/record "HTTP/1.1 200 OK"
2026-01-16 17:18:16.499 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/sentence-study/record "HTTP/1.1 200 OK"
2026-01-16 17:18:16.504 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/sentence-study/record "HTTP/1.1 200 OK"
2026-01-16 17:18:16.507 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/api/sentence-study/epub:progress-test.epub:1/progress "HTTP/1.1 200 OK"
2026-01-16 17:18:16.521 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/sentence-study/record "HTTP/1.1 200 OK"
2026-01-16 17:18:16.527 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/sentence-study/record "HTTP/1.1 200 OK"
2026-01-16 17:18:16.530 [BA] [INFO] [network] httpx: HTTP Request: GET http://test/api/sentence-study/epub:highlight-test.epub:1/study-highlights?total_sentences=2 "HTTP/1.1 200 OK"
2026-01-16 17:18:16.542 [BA] [INFO] [network] httpx: HTTP Request: POST http://test/api/sentence-study/detect-collocations "HTTP/1.1 200 OK"
2026-01-16 17:18:18.553 [BA] [INFO] [audio] httpx: HTTP Request: POST https://api.deepgram.com/v1/speak?model=aura-asteria-en&encoding=mp3 "HTTP/1.1 200 OK"
2026-01-16 17:18:20.501 [BA] [INFO] [network] httpx: HTTP Request: POST https://api.deepgram.com/v1/listen?model=nova-3&smart_format=true&punctuate=true&utterances=true&language=en-US "HTTP/1.1 200 OK"
2026-01-16 17:18:34.531 [BA] [INFO] [network] httpx: HTTP Request: POST https://api.deepgram.com/v1/listen?model=nova-3&smart_format=true&punctuate=true&utterances=true&language=en-US "HTTP/1.1 200 OK"
2026-01-16 17:18:34.545 [BA] [INFO] [network] httpx: HTTP Request: GET http://testserver/api/voice-lab/config "HTTP/1.1 200 OK"
2026-01-16 17:18:34.550 [BA] [INFO] [agent_ou] app.api.routers.voice_lab: TTS Request: deepgram - aura-asteria-en
2026-01-16 17:18:36.347 [BA] [INFO] [audio] httpx: HTTP Request: POST https://api.deepgram.com/v1/speak?model=aura-asteria-en&encoding=mp3 "HTTP/1.1 200 OK"
2026-01-16 17:18:36.377 [BA] [INFO] [agent_ou] httpx: HTTP Request: POST http://testserver/api/voice-lab/tts "HTTP/1.1 200 OK"
2026-01-16 17:18:36.383 [BA] [INFO] [user_inp] httpx: HTTP Request: POST http://testserver/api/voice-lab/stt "HTTP/1.1 422 Unprocessable Entity"
2026-01-16 17:18:36.442 [BA] [INFO] [network] httpx: HTTP Request: POST http://testserver/api/voice/token "HTTP/1.1 200 OK"
