{
  "openapi": "3.1.0",
  "info": {
    "title": "NCE English Practice",
    "version": "0.1.0"
  },
  "paths": {
    "/api/auth/registration-status": {
      "get": {
        "tags": [
          "auth"
        ],
        "summary": "Get Registration Status",
        "description": "Check if public registration is allowed.\nUseful for frontend to show/hide registration link.",
        "operationId": "get_registration_status_api_auth_registration_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Registration Status Api Auth Registration Status Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/register": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Register",
        "description": "Register a new user account.\nRegistration can be disabled via ALLOW_REGISTRATION setting.\nData migration is handled separately via admin CLI.",
        "operationId": "register_api_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegister"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Login",
        "description": "Login with email and password.\nReturns access token and refresh token.",
        "operationId": "login_api_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLogin"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/token": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Login For Access Token",
        "description": "OAuth2 compatible token endpoint (uses username field for email).",
        "operationId": "login_for_access_token_api_auth_token_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_login_for_access_token_api_auth_token_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/refresh": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Refresh Token",
        "description": "Get a new access token using refresh token.\nAccepts token from either request body or HttpOnly cookie.",
        "operationId": "refresh_token_api_auth_refresh_post",
        "parameters": [
          {
            "name": "refresh_token",
            "in": "cookie",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Refresh Token"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/RefreshTokenRequest"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Refresh Request"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Logout",
        "description": "Logout: clear refresh token cookie.\nClient should also discard the access token.",
        "operationId": "logout_api_auth_logout_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Logout Api Auth Logout Post"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/me": {
      "get": {
        "tags": [
          "auth"
        ],
        "summary": "Get Current User Profile",
        "description": "Get the current user's profile.",
        "operationId": "get_current_user_profile_api_auth_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "patch": {
        "tags": [
          "auth"
        ],
        "summary": "Update Profile",
        "description": "Update the current user's profile.",
        "operationId": "update_profile_api_auth_me_patch",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserProfileUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/auth/change-password": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Change Password",
        "description": "Change the current user's password.",
        "operationId": "change_password_api_auth_change_password_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PasswordChange"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Change Password Api Auth Change Password Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/voice/token": {
      "post": {
        "summary": "Api Voice Token",
        "operationId": "api_voice_token_api_voice_token_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VoiceTokenRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/dict-assets/{file_path}": {
      "get": {
        "summary": "Get Dict Asset",
        "description": "Unified endpoint for dictionary assets (CSS, JS, Images).",
        "operationId": "get_dict_asset_dict_assets__file_path__get",
        "parameters": [
          {
            "name": "file_path",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Path"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/dict/resource": {
      "get": {
        "summary": "Get Resource Legacy",
        "operationId": "get_resource_legacy_dict_resource_get",
        "parameters": [
          {
            "name": "path",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Path"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/dictionary/lookup": {
      "post": {
        "summary": "Api Dict Lookup",
        "operationId": "api_dict_lookup_api_dictionary_lookup_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DictionaryLookupRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/dictionary/context": {
      "post": {
        "summary": "Api Dict Context",
        "operationId": "api_dict_context_api_dictionary_context_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DictionaryContextRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/dictionary/collins/{word}": {
      "get": {
        "summary": "Get Collins Word",
        "description": "Get structured dictionary data for a word from Collins COBUILD.\n\nReturns parsed data including:\n- Headword, pronunciations (UK/US IPA), audio URLs\n- Word frequency (1-5)\n- Inflections (forms like simmers, simmered, etc.)\n- Senses with definitions, examples, translations\n- Synonyms, phrasal verbs\n\nIf the word is a cross-reference (e.g., \"unequivocally\" -> \"unequivocal\"),\nautomatically follows the reference and returns the base word's definition.\n\nExample: GET /api/dictionary/collins/simmer",
        "operationId": "get_collins_word_api_dictionary_collins__word__get",
        "parameters": [
          {
            "name": "word",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Word"
            }
          },
          {
            "name": "include_raw_html",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include raw HTML for debugging",
              "default": false,
              "title": "Include Raw Html"
            },
            "description": "Include raw HTML for debugging"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CollinsWord"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/dictionary/ldoce/{word}": {
      "get": {
        "summary": "Get Ldoce Word",
        "description": "Get structured dictionary data for a word from Longman LDOCE.\n\nReturns parsed data including:\n- Headword, pronunciations (BrE/AmE), audio URLs\n- Multiple entries (verb, noun, etc.)\n- Senses with definitions, examples, translations\n- Collocations, phrasal verbs\n\nExample: GET /api/dictionary/ldoce/simmer",
        "operationId": "get_ldoce_word_api_dictionary_ldoce__word__get",
        "parameters": [
          {
            "name": "word",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Word"
            }
          },
          {
            "name": "include_raw_html",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include raw HTML for debugging",
              "default": false,
              "title": "Include Raw Html"
            },
            "description": "Include raw HTML for debugging"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LDOCEWord"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/dictionary/{source}/{word}": {
      "get": {
        "summary": "Get Dictionary Word",
        "description": "Unified dictionary lookup endpoint.\n\nArgs:\n    source: Dictionary source - \"collins\" or \"ldoce\"\n    word: Word to lookup\n    include_raw_html: Include raw HTML for debugging\n\nReturns:\n    Structured dictionary data from the specified source.\n\nExamples:\n    GET /api/dictionary/collins/simmer\n    GET /api/dictionary/ldoce/simmer",
        "operationId": "get_dictionary_word_api_dictionary__source___word__get",
        "parameters": [
          {
            "name": "source",
            "in": "path",
            "required": true,
            "schema": {
              "enum": [
                "collins",
                "ldoce"
              ],
              "type": "string",
              "title": "Source"
            }
          },
          {
            "name": "word",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Word"
            }
          },
          {
            "name": "include_raw_html",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include raw HTML for debugging",
              "default": false,
              "title": "Include Raw Html"
            },
            "description": "Include raw HTML for debugging"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/CollinsWord"
                    },
                    {
                      "$ref": "#/components/schemas/LDOCEWord"
                    }
                  ],
                  "title": "Response Get Dictionary Word Api Dictionary  Source   Word  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/reading/epub/books": {
      "get": {
        "summary": "List Epub Books",
        "description": "List all available EPUB books in the resources directory.",
        "operationId": "list_epub_books_api_reading_epub_books_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/reading/epub/list": {
      "get": {
        "summary": "List Epub Articles",
        "description": "List all articles/chapters in an EPUB file.\n\nArgs:\n    filename: EPUB filename. If not provided, uses the first available EPUB.\n\nReturns: List of articles with titles and metadata.",
        "operationId": "list_epub_articles_api_reading_epub_list_get",
        "parameters": [
          {
            "name": "filename",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Filename"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/reading/epub/list-with-status": {
      "get": {
        "summary": "List Epub Articles With Status",
        "description": "List all articles with their reading/study status in a SINGLE request.\nCombines /api/reading/epub/list and /api/content/article-status for better performance.",
        "operationId": "list_epub_articles_with_status_api_reading_epub_list_with_status_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "filename",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Filename"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/reading/article": {
      "get": {
        "summary": "Get Article Content",
        "description": "Get full article content by source_id.\n\nArgs:\n    source_id: Format \"epub:{filename}:{chapter_index}\"\n    include_sentences: Whether to include sentence segmentation\n    book_code: Optional word book code (e.g., 'coca20000', 'cet4')\n    min_sequence: Optional min sequence for highlights\n    max_sequence: Optional max sequence for highlights\n    user_id: User ID for fetching study-based highlights\n\nReturns: Article with title, full_text, sentences, highlights, study_highlights, and images.",
        "operationId": "get_article_content_api_reading_article_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "source_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Source Id"
            }
          },
          {
            "name": "include_sentences",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Include Sentences"
            }
          },
          {
            "name": "book_code",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Book Code"
            }
          },
          {
            "name": "min_sequence",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Min Sequence"
            }
          },
          {
            "name": "max_sequence",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Max Sequence"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/reading/epub/image": {
      "get": {
        "summary": "Get Epub Image",
        "description": "Serve an image from an EPUB file.\n\nArgs:\n    filename: EPUB filename (e.g., 'TheEconomist.2025.12.27.epub')\n    image_path: Path to image within the EPUB\n\nReturns: Binary image data with appropriate Content-Type",
        "operationId": "get_epub_image_api_reading_epub_image_get",
        "parameters": [
          {
            "name": "filename",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Filename"
            }
          },
          {
            "name": "image_path",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Image Path"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/content/article-status": {
      "get": {
        "summary": "Get Article Status",
        "description": "Get combined reading and study status for all articles in an EPUB.\n\nOptimized with batch queries (O(1) instead of O(N) per article).\n\nReturns unified status for each article:\n- reading_sessions: number of reading sessions\n- last_read: timestamp of last reading session\n- study_progress: { current_index, total, clear_count, unclear_count }\n- has_review_items: whether article has active review items\n- status: \"new\" | \"read\" | \"in_progress\" | \"completed\"",
        "operationId": "get_article_status_api_content_article_status_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "filename",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Filename"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/performance": {
      "get": {
        "summary": "Api Get Performance",
        "description": "Get simplified performance dashboard data.\nReturns: study_time (Sentence Study + Reading), reading_stats, memory_curve.",
        "operationId": "api_get_performance_api_performance_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 365,
              "minimum": 7,
              "default": 30,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/performance/study-time": {
      "get": {
        "summary": "Api Get Study Time Detail",
        "description": "Get detailed daily study time breakdown.\n\nThe 'tz' parameter specifies the user's local timezone for correct daily grouping.\nWithout this, early morning sessions (e.g., 7AM Beijing time) would be incorrectly\nattributed to the previous day (since 7AM Beijing = 23:00 UTC previous day).",
        "operationId": "api_get_study_time_detail_api_performance_study_time_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 365,
              "minimum": 7,
              "default": 30,
              "title": "Days"
            }
          },
          {
            "name": "tz",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "User's IANA timezone (e.g., Asia/Shanghai, America/New_York)",
              "default": "UTC",
              "title": "Tz"
            },
            "description": "User's IANA timezone (e.g., Asia/Shanghai, America/New_York)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/voice-lab/config": {
      "get": {
        "tags": [
          "voice-lab"
        ],
        "summary": "Get Config",
        "description": "Get available providers, voices, and models.",
        "operationId": "get_config_api_voice_lab_config_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/voice-lab/tts": {
      "post": {
        "tags": [
          "voice-lab"
        ],
        "summary": "Tts Endpoint",
        "description": "Generate speech from text.",
        "operationId": "tts_endpoint_api_voice_lab_tts_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_tts_endpoint_api_voice_lab_tts_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/voice-lab/stt": {
      "post": {
        "tags": [
          "voice-lab"
        ],
        "summary": "Stt Endpoint",
        "description": "Transcribe audio file.",
        "operationId": "stt_endpoint_api_voice_lab_stt_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_stt_endpoint_api_voice_lab_stt_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/voice-lab/assess": {
      "post": {
        "tags": [
          "voice-lab"
        ],
        "summary": "Assess Endpoint",
        "description": "Assess pronunciation quality.",
        "operationId": "assess_endpoint_api_voice_lab_assess_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_assess_endpoint_api_voice_lab_assess_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/voice-lab/llm": {
      "post": {
        "tags": [
          "voice-lab"
        ],
        "summary": "Llm Endpoint",
        "description": "Simple LLM wrapper for Voice Lab Conversation Loop.",
        "operationId": "llm_endpoint_api_voice_lab_llm_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_llm_endpoint_api_voice_lab_llm_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/aui/debug/render": {
      "post": {
        "tags": [
          "AUI Debug"
        ],
        "summary": "Debug Render Ui",
        "description": "Simulate the Agent deciding to render a UI component.",
        "operationId": "debug_render_ui_api_aui_debug_render_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DebugRenderRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AUIRenderPacket"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/aui/input": {
      "post": {
        "tags": [
          "AUI Input"
        ],
        "summary": "Submit User Input to Agent",
        "description": "Receives user interactions (clicks, form submits) and signals the waiting Agent.\nUsed for Human-in-the-Loop (HITL) flows where the agent pauses for user input.",
        "operationId": "handle_aui_input_api_aui_input_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AUIUserInput"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/context/{word}": {
      "get": {
        "tags": [
          "Context Resources"
        ],
        "summary": "Get all context resources for a word",
        "description": "Get all saved context resources for a word.\nOptionally filter by context type.",
        "operationId": "get_word_contexts_api_context__word__get",
        "parameters": [
          {
            "name": "word",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Word"
            }
          },
          {
            "name": "context_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/ContextType"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Context Type"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ContextResourceWithAudio"
                  },
                  "title": "Response Get Word Contexts Api Context  Word  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/context/{word}/extract": {
      "post": {
        "tags": [
          "Context Resources"
        ],
        "summary": "Extract contexts from dictionary and save",
        "description": "Extract example sentences from loaded dictionaries.\nOptionally save to database (default: True).",
        "operationId": "extract_and_save_contexts_api_context__word__extract_post",
        "parameters": [
          {
            "name": "word",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Word"
            }
          },
          {
            "name": "save",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Save"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ContextResource"
                  },
                  "title": "Response Extract And Save Contexts Api Context  Word  Extract Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/context/{context_id}/audio": {
      "get": {
        "tags": [
          "Context Resources"
        ],
        "summary": "Get TTS audio for a context",
        "description": "Generate TTS audio for a context resource.\nReturns MP3 audio stream.",
        "operationId": "get_context_audio_api_context__context_id__audio_get",
        "parameters": [
          {
            "name": "context_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Context Id"
            }
          },
          {
            "name": "voice",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Voice"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/context/{context_id}/learn": {
      "post": {
        "tags": [
          "Context Resources"
        ],
        "summary": "Update learning status for a context",
        "description": "Update the learning status (unseen/learning/mastered) for a context.",
        "operationId": "update_learning_status_api_context__context_id__learn_post",
        "parameters": [
          {
            "name": "context_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Context Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateLearningStatusRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/context/{word}/progress": {
      "get": {
        "tags": [
          "Context Resources"
        ],
        "summary": "Get learning progress for a word",
        "description": "Get learning progress statistics for a word.\nReturns total contexts and counts by status.",
        "operationId": "get_word_progress_api_context__word__progress_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "word",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Word"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WordContextProgress"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/context/id/{context_id}": {
      "get": {
        "tags": [
          "Context Resources"
        ],
        "summary": "Get a single context by ID",
        "description": "Get a single context resource by its ID.",
        "operationId": "get_context_by_id_api_context_id__context_id__get",
        "parameters": [
          {
            "name": "context_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Context Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContextResource"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/tts": {
      "get": {
        "tags": [
          "TTS"
        ],
        "summary": "Text To Speech",
        "description": "Convert text to speech and return audio stream.\n\nArgs:\n    text: Text to speak\n    voice: Optional voice name (defaults to en-US-AndrewMultilingualNeural)\n\nReturns:\n    Audio stream (MP3)",
        "operationId": "text_to_speech_api_tts_get",
        "parameters": [
          {
            "name": "text",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Text to convert to speech",
              "title": "Text"
            },
            "description": "Text to convert to speech"
          },
          {
            "name": "voice",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Optional voice name",
              "title": "Voice"
            },
            "description": "Optional voice name"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/negotiation/interact": {
      "post": {
        "tags": [
          "negotiation"
        ],
        "summary": "Interact",
        "description": "Handle user interaction in the Recursive Negotiation Loop.\nUser sends intention (CONTINUE / HUH), and Server returns the next step and audio.",
        "operationId": "interact_api_negotiation_interact_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NegotiationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NegotiationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/negotiation/next-content": {
      "get": {
        "tags": [
          "negotiation"
        ],
        "summary": "Get Next Content",
        "description": "Get the next piece of content from the content feeder.\n\nArgs:\n    word: Optional specific word to look up.\n    book: Optional book code (e.g. 'cet4', 'coca') to select words from.\n    book_start: Optional min sequence number (inclusive)\n    book_end: Optional max sequence number (inclusive)\n    exclude: Optional word to exclude (for SKIP functionality)\n    rss_url: Optional RSS feed URL (for Reading Mode)\n    epub_file: Optional EPUB filename (for EPUB Mode)\n    article_idx: Optional article index for sequential reading\n    sentence_idx: Optional sentence index within article\n\nReturns:\n    FeedContent with a real dictionary example.",
        "operationId": "get_next_content_api_negotiation_next_content_get",
        "parameters": [
          {
            "name": "word",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Word"
            }
          },
          {
            "name": "book",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Book"
            }
          },
          {
            "name": "book_start",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "title": "Book Start"
            }
          },
          {
            "name": "book_end",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "title": "Book End"
            }
          },
          {
            "name": "exclude",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Exclude"
            }
          },
          {
            "name": "rss_url",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Rss Url"
            }
          },
          {
            "name": "epub_file",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Epub File"
            }
          },
          {
            "name": "article_idx",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "title": "Article Idx"
            }
          },
          {
            "name": "sentence_idx",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "title": "Sentence Idx"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedContent"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/negotiation/difficult-words": {
      "get": {
        "tags": [
          "negotiation"
        ],
        "summary": "Get Difficult Words",
        "description": "Get the user's most difficult words (highest HUH? rate).\n\nReturns:\n    List of words sorted by difficulty score.",
        "operationId": "get_difficult_words_api_negotiation_difficult_words_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/WordProficiencyResponse"
                  },
                  "title": "Response Get Difficult Words Api Negotiation Difficult Words Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/negotiation/word-examples": {
      "get": {
        "tags": [
          "negotiation"
        ],
        "summary": "Get Word Examples",
        "description": "Get ALL examples for a word, grouped by sense.\n\nArgs:\n    word: The word to look up.\n\nReturns:\n    WordExampleSet with all senses and examples.",
        "operationId": "get_word_examples_api_negotiation_word_examples_get",
        "parameters": [
          {
            "name": "word",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Word"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/negotiation/context": {
      "post": {
        "tags": [
          "negotiation"
        ],
        "summary": "Generate Context",
        "description": "Generate a micro-scenario for a given word/example.",
        "operationId": "generate_context_api_negotiation_context_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ContextRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContextResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/books/": {
      "get": {
        "tags": [
          "books"
        ],
        "summary": "Get Books",
        "description": "Get list of available word books.",
        "operationId": "get_books_api_books__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/WordBookResponse"
                  },
                  "type": "array",
                  "title": "Response Get Books Api Books  Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/books/{code}": {
      "get": {
        "tags": [
          "books"
        ],
        "summary": "Get Book",
        "description": "Get details of a specific word book.",
        "operationId": "get_book_api_books__code__get",
        "parameters": [
          {
            "name": "code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Code"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WordBookResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/books/{code}/next": {
      "get": {
        "tags": [
          "books"
        ],
        "summary": "Get Next Word",
        "description": "Get the next recommended word from the book.\nOptional query params:\n- start: min sequence (inclusive)\n- end: max sequence (inclusive)",
        "operationId": "get_next_word_api_books__code__next_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Code"
            }
          },
          {
            "name": "start",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Start"
            }
          },
          {
            "name": "end",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "End"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/inspect": {
      "get": {
        "tags": [
          "inspect"
        ],
        "summary": "Inspect Word",
        "description": "Inspect a word: look up definition AND record learning context.\n\nThis endpoint:\n1. Returns dictionary definition (Collins + LDOCE if available)\n2. Records the source context in VocabLearningLog for later review\n\nExample:\n    GET /api/inspect?word=pivot&source_id=epub:economist&context=Let's+pivot",
        "operationId": "inspect_word_api_inspect_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "word",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Word"
            }
          },
          {
            "name": "source_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Source type: epub, rss, podcast, plain_text, dictionary",
              "default": "dictionary",
              "title": "Source Type"
            },
            "description": "Source type: epub, rss, podcast, plain_text, dictionary"
          },
          {
            "name": "source_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Source identifier: e.g., 'epub:economist_2024_01'",
              "title": "Source Id"
            },
            "description": "Source identifier: e.g., 'epub:economist_2024_01'"
          },
          {
            "name": "context",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "The sentence where the word was encountered",
              "title": "Context"
            },
            "description": "The sentence where the word was encountered"
          },
          {
            "name": "timestamp",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Audio timestamp in seconds (for podcast/audio sources)",
              "title": "Timestamp"
            },
            "description": "Audio timestamp in seconds (for podcast/audio sources)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/inspect/history": {
      "get": {
        "tags": [
          "inspect"
        ],
        "summary": "Get Word History",
        "description": "Get learning history for a word: all contexts where it was encountered.\n\nEnables \"Where did I learn this word?\" feature during review.",
        "operationId": "get_word_history_api_inspect_history_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "word",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Word"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/reading/start": {
      "post": {
        "tags": [
          "reading"
        ],
        "summary": "Api Start Reading",
        "description": "Start a new reading session.",
        "operationId": "api_start_reading_api_reading_start_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__routers__reading__StartSessionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/reading/heartbeat": {
      "put": {
        "tags": [
          "reading"
        ],
        "summary": "Api Heartbeat",
        "description": "Update reading progress (called periodically by frontend).",
        "operationId": "api_heartbeat_api_reading_heartbeat_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/HeartbeatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/reading/word-click": {
      "post": {
        "tags": [
          "reading"
        ],
        "summary": "Api Word Click",
        "description": "Increment word click count for high-confidence reading signal.",
        "operationId": "api_word_click_api_reading_word_click_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WordClickRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/reading/end": {
      "post": {
        "tags": [
          "reading"
        ],
        "summary": "Api End Reading",
        "description": "End reading session and calculate validated word count.",
        "operationId": "api_end_reading_api_reading_end_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__routers__reading__EndSessionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/reading/stats": {
      "get": {
        "tags": [
          "reading"
        ],
        "summary": "Api Reading Stats",
        "description": "Get reading statistics with validated word count.",
        "operationId": "api_reading_stats_api_reading_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/proficiency/word": {
      "put": {
        "tags": [
          "Proficiency"
        ],
        "summary": "Update Word Proficiency",
        "description": "Explicitly update a word's status (e.g., Mark as Known).",
        "operationId": "update_word_proficiency_api_proficiency_word_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WordUpdatePayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/proficiency/sweep": {
      "post": {
        "tags": [
          "Proficiency"
        ],
        "summary": "Sweep Words",
        "description": "Batch mark words as known (Sweep) and analyze frequency bands.",
        "operationId": "sweep_words_api_proficiency_sweep_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SweepPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/proficiency/calibrate": {
      "post": {
        "tags": [
          "Proficiency"
        ],
        "summary": "Calibrate Proficiency",
        "description": "Process a calibration session to update proficiency and diagnose syntax gaps.",
        "operationId": "calibrate_proficiency_api_proficiency_calibrate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CalibrationPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/proficiency/calibration/session": {
      "get": {
        "tags": [
          "Proficiency"
        ],
        "summary": "Get Calibration Session",
        "description": "Get a new batch of sentences for the calibration session.",
        "operationId": "get_calibration_session_api_proficiency_calibration_session_get",
        "parameters": [
          {
            "name": "level",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Level"
            }
          },
          {
            "name": "count",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 5,
              "title": "Count"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/proficiency/calibration/level": {
      "get": {
        "tags": [
          "Proficiency"
        ],
        "summary": "Get Calibration Level",
        "description": "Get user's saved calibration level.\nUsed by Reading Mode to auto-select highlight band.",
        "operationId": "get_calibration_level_api_proficiency_calibration_level_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Proficiency"
        ],
        "summary": "Save Calibration Level",
        "description": "Save user's calibration level.\nCalled after calibration is complete.",
        "operationId": "save_calibration_level_api_proficiency_calibration_level_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CalibrationLevelPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/sentence-study/last-session": {
      "get": {
        "tags": [
          "sentence-study"
        ],
        "summary": "Get Last Session",
        "description": "Get the user's last studied article/session.",
        "operationId": "get_last_session_api_sentence_study_last_session_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/LastSessionResponse"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "title": "Response Get Last Session Api Sentence Study Last Session Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/sentence-study/{source_id}/progress": {
      "get": {
        "tags": [
          "sentence-study"
        ],
        "summary": "Get Study Progress",
        "description": "Get study progress for an article.",
        "operationId": "get_study_progress_api_sentence_study__source_id__progress_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "source_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Source Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StudyProgressResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/sentence-study/{source_id}/study-highlights": {
      "get": {
        "tags": [
          "sentence-study"
        ],
        "summary": "Get Study Highlights",
        "description": "Get all words/phrases looked up during study of an article.\n\nUsed for the 'COMPLETED' view to highlight all looked-up items in the full article.",
        "operationId": "get_study_highlights_api_sentence_study__source_id__study_highlights_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "source_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Source Id"
            }
          },
          {
            "name": "total_sentences",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Total Sentences"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StudyHighlightsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/sentence-study/record": {
      "post": {
        "tags": [
          "sentence-study"
        ],
        "summary": "Record Learning",
        "description": "Record a sentence learning result.",
        "operationId": "record_learning_api_sentence_study_record_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RecordRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/sentence-study/simplify": {
      "post": {
        "tags": [
          "sentence-study"
        ],
        "summary": "Simplify Sentence",
        "description": "Generate simplified version of a sentence using streaming LLM.",
        "operationId": "simplify_sentence_api_sentence_study_simplify_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SimplifyRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/sentence-study/overview": {
      "post": {
        "tags": [
          "sentence-study"
        ],
        "summary": "Generate Overview",
        "description": "Generate article overview with English summary and Chinese translation.\nCache priority: in-memory -> DB -> LLM generation.",
        "operationId": "generate_overview_api_sentence_study_overview_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OverviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/sentence-study/explain-word": {
      "post": {
        "tags": [
          "sentence-study"
        ],
        "summary": "Explain Word In Context",
        "description": "Stream LLM explanation of a word in its sentence context.",
        "operationId": "explain_word_in_context_api_sentence_study_explain_word_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExplainWordRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/sentence-study/detect-collocations": {
      "post": {
        "tags": [
          "sentence-study"
        ],
        "summary": "Detect Collocations",
        "description": "Detect common collocations/phrases in a sentence using LLM.",
        "operationId": "detect_collocations_api_sentence_study_detect_collocations_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DetectCollocationsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DetectCollocationsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/sentence-study/prefetch-collocations": {
      "post": {
        "tags": [
          "sentence-study"
        ],
        "summary": "Prefetch Collocations",
        "description": "Background prefetch collocations for upcoming sentences (lookahead).",
        "operationId": "prefetch_collocations_api_sentence_study_prefetch_collocations_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PrefetchCollocationsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/sentence-study/queue": {
      "get": {
        "tags": [
          "sentence-study"
        ],
        "summary": "Get Review Queue",
        "description": "Get sentences due for review (scheduled_review <= now).",
        "operationId": "get_review_queue_api_sentence_study_queue_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/app__models__sentence_study_schemas__ReviewQueueItem"
                  },
                  "type": "array",
                  "title": "Response Get Review Queue Api Sentence Study Queue Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/sentence-study/review": {
      "post": {
        "tags": [
          "sentence-study"
        ],
        "summary": "Complete Review",
        "description": "Complete a review and reschedule the sentence.",
        "operationId": "complete_review_api_sentence_study_review_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/sentence-study/profile": {
      "get": {
        "tags": [
          "sentence-study"
        ],
        "summary": "Get User Profile",
        "operationId": "get_user_profile_api_sentence_study_profile_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProfileResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/voice-session/start": {
      "post": {
        "tags": [
          "Voice Session"
        ],
        "summary": "Start Voice Session",
        "description": "Start a new voice learning session.",
        "operationId": "start_voice_session_api_voice_session_start_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__routers__voice_session__StartSessionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StartSessionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/voice-session/heartbeat": {
      "put": {
        "tags": [
          "Voice Session"
        ],
        "summary": "Update Voice Session",
        "description": "Update voice session with current metrics (called periodically).",
        "operationId": "update_voice_session_api_voice_session_heartbeat_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSessionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/voice-session/end": {
      "post": {
        "tags": [
          "Voice Session"
        ],
        "summary": "End Voice Session",
        "description": "End a voice learning session.",
        "operationId": "end_voice_session_api_voice_session_end_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__routers__voice_session__EndSessionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/review/debug/schedule": {
      "get": {
        "tags": [
          "review"
        ],
        "summary": "Get Review Schedule Debug",
        "description": "Get detailed review schedule for debugging purposes.\nReturns items grouped by date (YYYY-MM-DD), including logic trace.",
        "operationId": "get_review_schedule_debug_api_review_debug_schedule_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 14,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewScheduleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/review/debug/memory-curve": {
      "get": {
        "tags": [
          "review"
        ],
        "summary": "Get Memory Curve Debug",
        "description": "Get detailed debug info for memory curve analysis.\nShows ReviewLog data, interval distribution, and bucket statistics.",
        "operationId": "get_memory_curve_debug_api_review_debug_memory_curve_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemoryCurveDebugResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/review/context/{item_id}": {
      "get": {
        "tags": [
          "review"
        ],
        "summary": "Get Review Context",
        "description": "Get context (surrounding sentences) for a review item.\nResolves the source content via ContentService.",
        "operationId": "get_review_context_api_review_context__item_id__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "item_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Item Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewContextResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/review/queue": {
      "get": {
        "tags": [
          "review"
        ],
        "summary": "Get Review Queue",
        "description": "Get review items that are due for review (next_review_at <= now).",
        "operationId": "get_review_queue_api_review_queue_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewQueueResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/review/random": {
      "get": {
        "tags": [
          "review"
        ],
        "summary": "Get Random Review",
        "description": "Get random review items for extra practice (does not affect SM-2 schedule).",
        "operationId": "get_random_review_api_review_random_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewQueueResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/review/undo": {
      "post": {
        "tags": [
          "review"
        ],
        "summary": "Undo Last Review",
        "description": "Undo the last review action for the user.\nRestores the item's state (interval, rep, EF) and deletes the log.",
        "operationId": "undo_last_review_api_review_undo_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/app__api__routers__review__ReviewQueueItem"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/review/complete": {
      "post": {
        "tags": [
          "review"
        ],
        "summary": "Complete Review",
        "description": "Complete a review and update SM-2 scheduling parameters.",
        "operationId": "complete_review_api_review_complete_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompleteReviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CompleteReviewResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/review/create": {
      "post": {
        "tags": [
          "review"
        ],
        "summary": "Create Review Item",
        "description": "Create a new review item (typically called when user studies a sentence).",
        "operationId": "create_review_item_api_review_create_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateReviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateReviewResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/review/memory-curve": {
      "get": {
        "tags": [
          "review"
        ],
        "summary": "Get Memory Curve",
        "description": "Get memory curve statistics comparing theoretical Ebbinghaus curve\nwith user's actual retention rate at key time points.\n\nDelegates to shared function in app.database.performance.",
        "operationId": "get_memory_curve_api_review_memory_curve_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemoryCurveResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/review/stats": {
      "get": {
        "tags": [
          "review"
        ],
        "summary": "Get Review Stats",
        "description": "Get overall review statistics for the user.",
        "operationId": "get_review_stats_api_review_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/verify/health": {
      "get": {
        "tags": [
          "verification"
        ],
        "summary": "Get Health",
        "description": "Get system health status for autonomous verification.\n\nReturns recent errors from both frontend and backend,\nplus system connectivity status.",
        "operationId": "get_health_api_verify_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthCheckResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/generated-images/{word}": {
      "get": {
        "tags": [
          "images"
        ],
        "summary": "Get Generated Image",
        "description": "Get cached image by word and context hash.",
        "operationId": "get_generated_image_api_generated_images__word__get",
        "parameters": [
          {
            "name": "word",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Word"
            }
          },
          {
            "name": "context_hash",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Context hash of the sentence",
              "title": "Context Hash"
            },
            "description": "Context hash of the sentence"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/generated-images/generate": {
      "post": {
        "tags": [
          "images"
        ],
        "summary": "Generate Image",
        "description": "Generate or retrieve cached image.",
        "operationId": "generate_image_api_generated_images_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenerateImageRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/podcast/proxy/image": {
      "get": {
        "tags": [
          "podcast"
        ],
        "summary": "Proxy External Image",
        "description": "Proxy an arbitrary external image URL using a signed token.\nThis allows frontend to load images from third-party domains (iTunes, etc)\nwithout CORS/Mixed Content issues, while preventing open relay abuse.",
        "operationId": "proxy_external_image_api_podcast_proxy_image_get",
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/podcast/feed/{feed_id}/image": {
      "get": {
        "tags": [
          "podcast"
        ],
        "summary": "Get Feed Image",
        "description": "Proxy feed image.",
        "operationId": "get_feed_image_api_podcast_feed__feed_id__image_get",
        "parameters": [
          {
            "name": "feed_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Feed Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/podcast/episode/{episode_id}/image": {
      "get": {
        "tags": [
          "podcast"
        ],
        "summary": "Get Episode Image",
        "description": "Proxy episode image.",
        "operationId": "get_episode_image_api_podcast_episode__episode_id__image_get",
        "parameters": [
          {
            "name": "episode_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Episode Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/podcast/search": {
      "get": {
        "tags": [
          "podcast"
        ],
        "summary": "Search Podcasts",
        "description": "Search podcasts via iTunes.\nIncludes subscription status for the current user.",
        "operationId": "search_podcasts_api_podcast_search_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Q"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Limit"
            }
          },
          {
            "name": "country",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "US",
              "title": "Country"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ItunesSearchResult"
                  },
                  "title": "Response Search Podcasts Api Podcast Search Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/podcast/categories": {
      "get": {
        "tags": [
          "podcast"
        ],
        "summary": "Get Categories",
        "description": "Get list of iTunes podcast categories for exploration.",
        "operationId": "get_categories_api_podcast_categories_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/Category"
                  },
                  "type": "array",
                  "title": "Response Get Categories Api Podcast Categories Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/podcast/preview": {
      "post": {
        "tags": [
          "podcast"
        ],
        "summary": "Preview Podcast",
        "description": "Preview a podcast by RSS URL.\nFetches and parses the feed, stores it in DB (for caching/proxy),\nand returns full details including episodes.\nDoes NOT subscribe the user.",
        "operationId": "preview_podcast_api_podcast_preview_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PreviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/podcast/trending": {
      "get": {
        "tags": [
          "podcast"
        ],
        "summary": "Get Trending Podcasts",
        "description": "Get trending podcasts from iTunes Top Charts.\nIncludes subscription status for the current user.",
        "operationId": "get_trending_podcasts_api_podcast_trending_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Category"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ItunesSearchResult"
                  },
                  "title": "Response Get Trending Podcasts Api Podcast Trending Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/podcast/subscribe": {
      "post": {
        "tags": [
          "podcast"
        ],
        "summary": "Subscribe To Podcast",
        "description": "Subscribe to a podcast by RSS URL.",
        "operationId": "subscribe_to_podcast_api_podcast_subscribe_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SubscribeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/podcast/feed/{feed_id}": {
      "delete": {
        "tags": [
          "podcast"
        ],
        "summary": "Unsubscribe From Podcast",
        "description": "Unsubscribe from a podcast.",
        "operationId": "unsubscribe_from_podcast_api_podcast_feed__feed_id__delete",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "feed_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Feed Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "podcast"
        ],
        "summary": "Get Feed Detail",
        "description": "Get feed details with episodes (includes user state for resume).",
        "operationId": "get_feed_detail_api_podcast_feed__feed_id__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "feed_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Feed Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/podcast/feeds": {
      "get": {
        "tags": [
          "podcast"
        ],
        "summary": "Get Subscriptions",
        "description": "Get all subscribed podcasts.\nOptimized to fetch episode counts in a single query.",
        "operationId": "get_subscriptions_api_podcast_feeds_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/FeedResponse"
                  },
                  "type": "array",
                  "title": "Response Get Subscriptions Api Podcast Feeds Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/podcast/episodes/batch": {
      "post": {
        "tags": [
          "podcast"
        ],
        "summary": "Get Episodes Batch",
        "description": "Get details for multiple episodes by ID.\nUsed for efficient bulk loading (e.g., downloads page).",
        "operationId": "get_episodes_batch_api_podcast_episodes_batch_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchEpisodesRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/podcast/feed/{feed_id}/refresh": {
      "post": {
        "tags": [
          "podcast"
        ],
        "summary": "Refresh Feed",
        "description": "Refresh a feed to check for new episodes.",
        "operationId": "refresh_feed_api_podcast_feed__feed_id__refresh_post",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "feed_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Feed Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/podcast/opml/import": {
      "post": {
        "tags": [
          "podcast"
        ],
        "summary": "Import Opml",
        "description": "Import podcasts from OPML file.",
        "operationId": "import_opml_api_podcast_opml_import_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_import_opml_api_podcast_opml_import_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OPMLImportResult"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/podcast/opml/import/stream": {
      "post": {
        "tags": [
          "podcast"
        ],
        "summary": "Import Opml Streaming",
        "description": "Import podcasts from OPML file with SSE streaming progress.\n\nYields JSON events:\n- {\"type\": \"start\", \"total\": N} - Import started with N feeds\n- {\"type\": \"progress\", \"current\": i, \"total\": N, \"title\": \"...\", \"rss_url\": \"...\"} - Processing feed i\n- {\"type\": \"result\", \"success\": true/false, \"title\": \"...\", \"error\": \"...\", \"status\": \"imported|skipped\"} - Feed result\n- {\"type\": \"complete\", \"imported\": X, \"skipped\": Y, \"total\": N} - Import complete",
        "operationId": "import_opml_streaming_api_podcast_opml_import_stream_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_import_opml_streaming_api_podcast_opml_import_stream_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/podcast/opml/export": {
      "get": {
        "tags": [
          "podcast"
        ],
        "summary": "Export Opml",
        "description": "Export subscriptions as OPML file.",
        "operationId": "export_opml_api_podcast_opml_export_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/podcast/session/start": {
      "post": {
        "tags": [
          "podcast"
        ],
        "summary": "Start Session",
        "description": "Start a listening session.",
        "operationId": "start_session_api_podcast_session_start_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ListeningSessionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/podcast/session/update": {
      "post": {
        "tags": [
          "podcast"
        ],
        "summary": "Update Session",
        "description": "Update listening progress.",
        "operationId": "update_session_api_podcast_session_update_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ListeningSessionUpdateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/podcast/session/update-beacon": {
      "post": {
        "tags": [
          "podcast"
        ],
        "summary": "Update Session Beacon",
        "description": "Update listening progress via navigator.sendBeacon.\nThis endpoint accepts text/plain JSON from sendBeacon for reliable save on page unload.\nNote: No auth since sendBeacon can't set headers - we rely on session_id validation.",
        "operationId": "update_session_beacon_api_podcast_session_update_beacon_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/podcast/session/end": {
      "post": {
        "tags": [
          "podcast"
        ],
        "summary": "End Session",
        "description": "End a listening session.",
        "operationId": "end_session_api_podcast_session_end_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ListeningSessionUpdateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/podcast/episode/{episode_id}/position": {
      "get": {
        "tags": [
          "podcast"
        ],
        "summary": "Get Episode Position",
        "description": "Get last playback position for resume.",
        "operationId": "get_episode_position_api_podcast_episode__episode_id__position_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "episode_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Episode Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/podcast/recently-played": {
      "get": {
        "tags": [
          "podcast"
        ],
        "summary": "Get Recently Played",
        "description": "Get recently played episodes with resume positions.",
        "operationId": "get_recently_played_api_podcast_recently_played_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/podcast/episode/{episode_id}/download": {
      "head": {
        "tags": [
          "podcast"
        ],
        "summary": "Download Episode Head",
        "description": "HEAD request to get Content-Length for progress tracking.\nReturns headers only, no body.",
        "operationId": "download_episode_head_api_podcast_episode__episode_id__download_head",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "episode_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Episode Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "podcast"
        ],
        "summary": "Download Episode",
        "description": "Proxy download for an episode audio file.\nStreams the audio through the server for offline storage.\nSupports Range requests for resumable downloads.",
        "operationId": "download_episode_api_podcast_episode__episode_id__download_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "episode_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Episode Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/logs": {
      "post": {
        "summary": "Receive Remote Log",
        "description": "Receive logs from frontend and add to unified log collector.",
        "operationId": "receive_remote_log_api_logs_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RemoteLog"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/{full_path}": {
      "get": {
        "summary": "Serve Spa",
        "description": "SPA fallback: serve index.html for all non-API routes.",
        "operationId": "serve_spa__full_path__get",
        "parameters": [
          {
            "name": "full_path",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Full Path"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AUIComponent": {
        "properties": {
          "component": {
            "type": "string",
            "title": "Component"
          },
          "props": {
            "additionalProperties": true,
            "type": "object",
            "title": "Props"
          }
        },
        "type": "object",
        "required": [
          "component"
        ],
        "title": "AUIComponent",
        "description": "Base model for any UI component payload."
      },
      "AUIRenderPacket": {
        "properties": {
          "type": {
            "type": "string",
            "const": "aui_render",
            "title": "Type",
            "default": "aui_render"
          },
          "id": {
            "type": "string",
            "title": "Id"
          },
          "intention": {
            "type": "string",
            "title": "Intention"
          },
          "ui": {
            "$ref": "#/components/schemas/AUIComponent"
          },
          "fallback_text": {
            "type": "string",
            "title": "Fallback Text"
          },
          "target_level": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Level"
          }
        },
        "type": "object",
        "required": [
          "intention",
          "ui",
          "fallback_text"
        ],
        "title": "AUIRenderPacket",
        "description": "The standard envelope for Agent-to-UI communication."
      },
      "AUIUserInput": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id",
            "description": "Unique session identifier"
          },
          "action": {
            "type": "string",
            "title": "Action",
            "description": "Action identifier (e.g., 'confirm', 'submit')"
          },
          "payload": {
            "additionalProperties": true,
            "type": "object",
            "title": "Payload",
            "description": "Additional data associated with the action"
          },
          "client_timestamp": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Client Timestamp",
            "description": "Client-side timestamp"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "action"
        ],
        "title": "AUIUserInput",
        "description": "Schema for user input sent from frontend to agent."
      },
      "BatchEpisodesRequest": {
        "properties": {
          "episode_ids": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Episode Ids"
          }
        },
        "type": "object",
        "required": [
          "episode_ids"
        ],
        "title": "BatchEpisodesRequest"
      },
      "Body_assess_endpoint_api_voice_lab_assess_post": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider",
            "default": "mock"
          },
          "reference_text": {
            "type": "string",
            "title": "Reference Text"
          },
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "reference_text",
          "file"
        ],
        "title": "Body_assess_endpoint_api_voice_lab_assess_post"
      },
      "Body_import_opml_api_podcast_opml_import_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_import_opml_api_podcast_opml_import_post"
      },
      "Body_import_opml_streaming_api_podcast_opml_import_stream_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_import_opml_streaming_api_podcast_opml_import_stream_post"
      },
      "Body_llm_endpoint_api_voice_lab_llm_post": {
        "properties": {
          "text": {
            "type": "string",
            "title": "Text"
          },
          "model": {
            "type": "string",
            "title": "Model"
          }
        },
        "type": "object",
        "required": [
          "text"
        ],
        "title": "Body_llm_endpoint_api_voice_lab_llm_post"
      },
      "Body_login_for_access_token_api_auth_token_post": {
        "properties": {
          "grant_type": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^password$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grant Type"
          },
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "format": "password",
            "title": "Password"
          },
          "scope": {
            "type": "string",
            "title": "Scope",
            "default": ""
          },
          "client_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Client Id"
          },
          "client_secret": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "format": "password",
            "title": "Client Secret"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "Body_login_for_access_token_api_auth_token_post"
      },
      "Body_stt_endpoint_api_voice_lab_stt_post": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "provider",
          "file"
        ],
        "title": "Body_stt_endpoint_api_voice_lab_stt_post"
      },
      "Body_tts_endpoint_api_voice_lab_tts_post": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "text": {
            "type": "string",
            "title": "Text"
          },
          "voice_id": {
            "type": "string",
            "title": "Voice Id"
          },
          "model": {
            "type": "string",
            "title": "Model",
            "default": "default"
          }
        },
        "type": "object",
        "required": [
          "provider",
          "text",
          "voice_id"
        ],
        "title": "Body_tts_endpoint_api_voice_lab_tts_post"
      },
      "CalibrationItem": {
        "properties": {
          "sentence_text": {
            "type": "string",
            "title": "Sentence Text"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "confused_words": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Confused Words",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "sentence_text",
          "status"
        ],
        "title": "CalibrationItem"
      },
      "CalibrationLevelPayload": {
        "properties": {
          "level": {
            "type": "integer",
            "title": "Level"
          }
        },
        "type": "object",
        "required": [
          "level"
        ],
        "title": "CalibrationLevelPayload"
      },
      "CalibrationPayload": {
        "properties": {
          "session_data": {
            "items": {
              "$ref": "#/components/schemas/CalibrationItem"
            },
            "type": "array",
            "title": "Session Data"
          }
        },
        "type": "object",
        "required": [
          "session_data"
        ],
        "title": "CalibrationPayload"
      },
      "Category": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name"
        ],
        "title": "Category"
      },
      "CollinsAudio": {
        "properties": {
          "original_path": {
            "type": "string",
            "title": "Original Path",
            "description": "Original path like sound://COLmp3/50560.mp3"
          },
          "api_url": {
            "type": "string",
            "title": "Api Url",
            "description": "API endpoint like /dict/resource?path=COLmp3/50560.mp3"
          }
        },
        "type": "object",
        "required": [
          "original_path",
          "api_url"
        ],
        "title": "CollinsAudio",
        "description": "Audio resource with original path and API URL."
      },
      "CollinsEntry": {
        "properties": {
          "headword": {
            "type": "string",
            "title": "Headword",
            "description": "The word being defined"
          },
          "pronunciation_uk": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pronunciation Uk",
            "description": "UK IPA pronunciation"
          },
          "pronunciation_us": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pronunciation Us",
            "description": "US IPA pronunciation"
          },
          "audio_uk": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CollinsAudio"
              },
              {
                "type": "null"
              }
            ],
            "description": "UK audio pronunciation"
          },
          "audio_us": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CollinsAudio"
              },
              {
                "type": "null"
              }
            ],
            "description": "US audio pronunciation"
          },
          "frequency": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 5.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Frequency",
            "description": "Word frequency 1-5 (based on red circles)"
          },
          "inflections": {
            "items": {
              "$ref": "#/components/schemas/CollinsInflection"
            },
            "type": "array",
            "title": "Inflections",
            "description": "Inflected forms"
          },
          "senses": {
            "items": {
              "$ref": "#/components/schemas/CollinsSense"
            },
            "type": "array",
            "title": "Senses",
            "description": "List of meanings"
          },
          "phrasal_verbs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Phrasal Verbs",
            "description": "Related phrasal verbs"
          }
        },
        "type": "object",
        "required": [
          "headword"
        ],
        "title": "CollinsEntry",
        "description": "A complete dictionary entry for a word."
      },
      "CollinsExample": {
        "properties": {
          "text": {
            "type": "string",
            "title": "Text",
            "description": "Example sentence in English"
          },
          "translation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Translation",
            "description": "Chinese translation"
          },
          "grammar_pattern": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grammar Pattern",
            "description": "Grammar pattern like 'VERB noun'"
          }
        },
        "type": "object",
        "required": [
          "text"
        ],
        "title": "CollinsExample",
        "description": "Example sentence with optional translation."
      },
      "CollinsInflection": {
        "properties": {
          "form": {
            "type": "string",
            "title": "Form",
            "description": "Inflected form"
          },
          "label": {
            "type": "string",
            "title": "Label",
            "description": "Grammar label (e.g., '3rd person singular present tense')"
          },
          "audio": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CollinsAudio"
              },
              {
                "type": "null"
              }
            ],
            "description": "Audio for this form"
          }
        },
        "type": "object",
        "required": [
          "form",
          "label"
        ],
        "title": "CollinsInflection",
        "description": "Word inflection form (e.g., 3rd person singular, past tense)."
      },
      "CollinsSense": {
        "properties": {
          "index": {
            "type": "integer",
            "title": "Index",
            "description": "Sense number (1, 2, 3...)"
          },
          "definition": {
            "type": "string",
            "title": "Definition",
            "description": "Definition text in English"
          },
          "definition_cn": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Definition Cn",
            "description": "Chinese translation of definition"
          },
          "part_of_speech": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Part Of Speech",
            "description": "Part of speech for this sense (V-ERG, NOUN, etc.)"
          },
          "domain": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Domain",
            "description": "Domain label (COOKING, JOURNALISM)"
          },
          "examples": {
            "items": {
              "$ref": "#/components/schemas/CollinsExample"
            },
            "type": "array",
            "title": "Examples",
            "description": "Example sentences"
          },
          "synonyms": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Synonyms",
            "description": "Synonyms"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note",
            "description": "Usage note (e.g., 'Simmer is also a noun.')"
          },
          "note_examples": {
            "items": {
              "$ref": "#/components/schemas/CollinsExample"
            },
            "type": "array",
            "title": "Note Examples",
            "description": "Examples in note section"
          }
        },
        "type": "object",
        "required": [
          "index",
          "definition"
        ],
        "title": "CollinsSense",
        "description": "A single sense/meaning of a word."
      },
      "CollinsWord": {
        "properties": {
          "word": {
            "type": "string",
            "title": "Word",
            "description": "The queried word"
          },
          "found": {
            "type": "boolean",
            "title": "Found",
            "description": "Whether the word was found"
          },
          "entry": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CollinsEntry"
              },
              {
                "type": "null"
              }
            ],
            "description": "Dictionary entry"
          },
          "raw_html": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Raw Html",
            "description": "Original HTML (for debugging, excluded by default)"
          }
        },
        "type": "object",
        "required": [
          "word",
          "found"
        ],
        "title": "CollinsWord",
        "description": "Complete response for a dictionary lookup.",
        "example": {
          "entry": {
            "frequency": 2,
            "headword": "simmer",
            "phrasal_verbs": [
              "simmer down"
            ],
            "pronunciation_uk": "s\u026am\u0259\u02b3",
            "pronunciation_us": "\u02c8s\u026am\u0259r",
            "senses": [
              {
                "definition": "When you simmer food or when it simmers, you cook it...",
                "definition_cn": "\u7528\u6587\u706b\u7096;\u7168",
                "examples": [
                  {
                    "text": "Turn the heat down so the sauce simmers gently.",
                    "translation": "\u5c06\u7089\u706b\u8c03\u5c0f\uff0c\u7528\u6587\u706b\u7096\u8c03\u5473\u6c41\u3002"
                  }
                ],
                "index": 1,
                "part_of_speech": "V-ERG",
                "synonyms": [
                  "bubble",
                  "stew",
                  "boil gently"
                ]
              }
            ]
          },
          "found": true,
          "word": "simmer"
        }
      },
      "CollocationItem": {
        "properties": {
          "text": {
            "type": "string",
            "title": "Text"
          },
          "key_word": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Key Word"
          },
          "start_word_idx": {
            "type": "integer",
            "title": "Start Word Idx"
          },
          "end_word_idx": {
            "type": "integer",
            "title": "End Word Idx"
          }
        },
        "type": "object",
        "required": [
          "text",
          "start_word_idx",
          "end_word_idx"
        ],
        "title": "CollocationItem",
        "description": "A detected collocation/phrase."
      },
      "CompleteReviewRequest": {
        "properties": {
          "item_id": {
            "type": "integer",
            "title": "Item Id"
          },
          "quality": {
            "type": "integer",
            "title": "Quality"
          },
          "duration_ms": {
            "type": "integer",
            "title": "Duration Ms",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "item_id",
          "quality"
        ],
        "title": "CompleteReviewRequest",
        "description": "Request to complete a review."
      },
      "CompleteReviewResponse": {
        "properties": {
          "next_review_at": {
            "type": "string",
            "title": "Next Review At"
          },
          "new_interval": {
            "type": "number",
            "title": "New Interval"
          },
          "new_ef": {
            "type": "number",
            "title": "New Ef"
          },
          "repetition": {
            "type": "integer",
            "title": "Repetition"
          }
        },
        "type": "object",
        "required": [
          "next_review_at",
          "new_interval",
          "new_ef",
          "repetition"
        ],
        "title": "CompleteReviewResponse",
        "description": "Response after completing a review."
      },
      "ContextRequest": {
        "properties": {
          "word": {
            "type": "string",
            "title": "Word"
          },
          "definition": {
            "type": "string",
            "title": "Definition"
          },
          "target_sentence": {
            "type": "string",
            "title": "Target Sentence"
          }
        },
        "type": "object",
        "required": [
          "word",
          "definition",
          "target_sentence"
        ],
        "title": "ContextRequest",
        "description": "Request to generate a micro-scenario context."
      },
      "ContextResource": {
        "properties": {
          "word": {
            "type": "string",
            "title": "Word",
            "description": "\u5173\u8054\u7684\u5355\u8bcd"
          },
          "sense_label": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sense Label",
            "description": "\u4e49\u9879\u6807\u7b7e (e.g., 'v. to cook gently')"
          },
          "context_type": {
            "$ref": "#/components/schemas/ContextType",
            "description": "\u8bed\u5883\u7c7b\u578b"
          },
          "text_content": {
            "type": "string",
            "title": "Text Content",
            "description": "\u6587\u5b57\u5185\u5bb9 (\u4f8b\u53e5/Story\u7247\u6bb5)"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "\u6765\u6e90 (dictionary name / 'ai_generated' / URL)"
          },
          "story_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Story Id",
            "description": "\u5982\u679c\u662fStory\u7c7b\u578b\uff0c\u5173\u8054Story\u8868"
          },
          "audio_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Url",
            "description": "\u8bed\u97f3URL (\u5982\u679c\u9884\u751f\u6210)"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "word",
          "context_type",
          "text_content",
          "source",
          "id"
        ],
        "title": "ContextResource",
        "description": "\u8bed\u5883\u8d44\u6e90\u5b8c\u6574\u6a21\u578b (\u5305\u542bID)"
      },
      "ContextResourceWithAudio": {
        "properties": {
          "word": {
            "type": "string",
            "title": "Word",
            "description": "\u5173\u8054\u7684\u5355\u8bcd"
          },
          "sense_label": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sense Label",
            "description": "\u4e49\u9879\u6807\u7b7e (e.g., 'v. to cook gently')"
          },
          "context_type": {
            "$ref": "#/components/schemas/ContextType",
            "description": "\u8bed\u5883\u7c7b\u578b"
          },
          "text_content": {
            "type": "string",
            "title": "Text Content",
            "description": "\u6587\u5b57\u5185\u5bb9 (\u4f8b\u53e5/Story\u7247\u6bb5)"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "\u6765\u6e90 (dictionary name / 'ai_generated' / URL)"
          },
          "story_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Story Id",
            "description": "\u5982\u679c\u662fStory\u7c7b\u578b\uff0c\u5173\u8054Story\u8868"
          },
          "audio_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Url",
            "description": "\u8bed\u97f3URL (\u5982\u679c\u9884\u751f\u6210)"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "audio_available": {
            "type": "boolean",
            "title": "Audio Available",
            "default": true
          },
          "audio_endpoint": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Endpoint"
          }
        },
        "type": "object",
        "required": [
          "word",
          "context_type",
          "text_content",
          "source",
          "id"
        ],
        "title": "ContextResourceWithAudio",
        "description": "\u5e26\u6709\u97f3\u9891\u4fe1\u606f\u7684\u8bed\u5883\u8d44\u6e90"
      },
      "ContextResponse": {
        "properties": {
          "scenario": {
            "type": "string",
            "title": "Scenario"
          }
        },
        "type": "object",
        "required": [
          "scenario"
        ],
        "title": "ContextResponse",
        "description": "Response containing the generated micro-scenario."
      },
      "ContextType": {
        "type": "string",
        "enum": [
          "dictionary_example",
          "story",
          "audio_clip",
          "video_clip",
          "custom"
        ],
        "title": "ContextType",
        "description": "\u8bed\u5883\u8d44\u6e90\u7c7b\u578b"
      },
      "CreateReviewRequest": {
        "properties": {
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "sentence_index": {
            "type": "integer",
            "title": "Sentence Index"
          },
          "sentence_text": {
            "type": "string",
            "title": "Sentence Text"
          },
          "highlighted_items": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Highlighted Items",
            "default": []
          },
          "difficulty_type": {
            "type": "string",
            "title": "Difficulty Type",
            "default": "vocabulary"
          }
        },
        "type": "object",
        "required": [
          "source_id",
          "sentence_index",
          "sentence_text"
        ],
        "title": "CreateReviewRequest",
        "description": "Request to create a review item."
      },
      "CreateReviewResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "next_review_at": {
            "type": "string",
            "title": "Next Review At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "next_review_at"
        ],
        "title": "CreateReviewResponse",
        "description": "Response after creating review item."
      },
      "DebugRenderRequest": {
        "properties": {
          "intent": {
            "type": "string",
            "title": "Intent"
          },
          "data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Data"
          },
          "user_level": {
            "type": "integer",
            "title": "User Level",
            "default": 1
          }
        },
        "type": "object",
        "required": [
          "intent",
          "data"
        ],
        "title": "DebugRenderRequest"
      },
      "DetectCollocationsRequest": {
        "properties": {
          "sentence": {
            "type": "string",
            "title": "Sentence"
          }
        },
        "type": "object",
        "required": [
          "sentence"
        ],
        "title": "DetectCollocationsRequest",
        "description": "Request to detect collocations/phrases in a sentence."
      },
      "DetectCollocationsResponse": {
        "properties": {
          "collocations": {
            "items": {
              "$ref": "#/components/schemas/CollocationItem"
            },
            "type": "array",
            "title": "Collocations"
          }
        },
        "type": "object",
        "required": [
          "collocations"
        ],
        "title": "DetectCollocationsResponse",
        "description": "Response with detected collocations."
      },
      "DictionaryContextRequest": {
        "properties": {
          "word": {
            "type": "string",
            "title": "Word"
          },
          "sentence": {
            "type": "string",
            "title": "Sentence"
          }
        },
        "type": "object",
        "required": [
          "word",
          "sentence"
        ],
        "title": "DictionaryContextRequest"
      },
      "DictionaryLookupRequest": {
        "properties": {
          "word": {
            "type": "string",
            "title": "Word"
          }
        },
        "type": "object",
        "required": [
          "word"
        ],
        "title": "DictionaryLookupRequest"
      },
      "EpisodeResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "guid": {
            "type": "string",
            "title": "Guid"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "audio_url": {
            "type": "string",
            "title": "Audio Url"
          },
          "duration_seconds": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Seconds"
          },
          "image_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Url"
          },
          "published_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Published At"
          },
          "transcript_status": {
            "type": "string",
            "title": "Transcript Status"
          },
          "current_position": {
            "type": "number",
            "title": "Current Position",
            "default": 0.0
          },
          "is_finished": {
            "type": "boolean",
            "title": "Is Finished",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "id",
          "guid",
          "title",
          "description",
          "audio_url",
          "duration_seconds",
          "image_url",
          "published_at",
          "transcript_status"
        ],
        "title": "EpisodeResponse"
      },
      "ExplainWordRequest": {
        "properties": {
          "word": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Word"
          },
          "text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Text"
          },
          "sentence": {
            "type": "string",
            "title": "Sentence"
          },
          "prev_sentence": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prev Sentence"
          },
          "next_sentence": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Sentence"
          },
          "style": {
            "type": "string",
            "title": "Style",
            "default": "default"
          }
        },
        "type": "object",
        "required": [
          "sentence"
        ],
        "title": "ExplainWordRequest",
        "description": "Request to explain a word or phrase in its sentence context via streaming LLM."
      },
      "FeedContent": {
        "properties": {
          "text": {
            "type": "string",
            "title": "Text",
            "description": "The main text/sentence to present"
          },
          "translation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Translation",
            "description": "Chinese translation if available"
          },
          "source_word": {
            "type": "string",
            "title": "Source Word",
            "description": "The word this example came from"
          },
          "definition": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Definition",
            "description": "The definition of the word"
          },
          "source_type": {
            "type": "string",
            "title": "Source Type",
            "description": "dictionary, rss, podcast, etc.",
            "default": "dictionary"
          },
          "highlights": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Highlights",
            "description": "List of words to highlight in the text"
          },
          "article_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Article Title",
            "description": "Title of the source article (for RSS)"
          },
          "article_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Article Link",
            "description": "URL of the source article (for RSS)"
          },
          "article_idx": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Article Idx",
            "description": "Current article index"
          },
          "sentence_idx": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sentence Idx",
            "description": "Current sentence index within article"
          },
          "total_sentences": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Sentences",
            "description": "Total sentences in current article"
          },
          "has_next": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Has Next",
            "description": "Whether there's more content to read"
          },
          "raw_content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Raw Content",
            "description": "Full raw article content (for debugging)"
          }
        },
        "type": "object",
        "required": [
          "text",
          "source_word"
        ],
        "title": "FeedContent",
        "description": "A piece of content to feed to the Voice Interface."
      },
      "FeedDetailResponse": {
        "properties": {
          "feed": {
            "$ref": "#/components/schemas/FeedResponse"
          },
          "episodes": {
            "items": {
              "$ref": "#/components/schemas/EpisodeResponse"
            },
            "type": "array",
            "title": "Episodes"
          },
          "is_subscribed": {
            "type": "boolean",
            "title": "Is Subscribed",
            "default": false
          },
          "total_episodes": {
            "type": "integer",
            "title": "Total Episodes",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "feed",
          "episodes"
        ],
        "title": "FeedDetailResponse"
      },
      "FeedResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "author": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Author"
          },
          "image_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Url"
          },
          "rss_url": {
            "type": "string",
            "title": "Rss Url"
          },
          "episode_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Episode Count"
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category"
          }
        },
        "type": "object",
        "required": [
          "id",
          "title",
          "description",
          "author",
          "image_url",
          "rss_url"
        ],
        "title": "FeedResponse"
      },
      "GenerateImageRequest": {
        "properties": {
          "word": {
            "type": "string",
            "title": "Word"
          },
          "sentence": {
            "type": "string",
            "title": "Sentence"
          },
          "image_prompt": {
            "type": "string",
            "title": "Image Prompt"
          }
        },
        "type": "object",
        "required": [
          "word",
          "sentence",
          "image_prompt"
        ],
        "title": "GenerateImageRequest"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthCheckResponse": {
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "healthy",
              "unhealthy"
            ],
            "title": "Status"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp"
          },
          "error_count": {
            "type": "integer",
            "title": "Error Count"
          },
          "warning_count": {
            "type": "integer",
            "title": "Warning Count"
          },
          "frontend_errors": {
            "items": {
              "$ref": "#/components/schemas/LogEntryResponse"
            },
            "type": "array",
            "title": "Frontend Errors"
          },
          "backend_errors": {
            "items": {
              "$ref": "#/components/schemas/LogEntryResponse"
            },
            "type": "array",
            "title": "Backend Errors"
          },
          "db_connected": {
            "type": "boolean",
            "title": "Db Connected"
          },
          "summary": {
            "type": "string",
            "title": "Summary"
          }
        },
        "type": "object",
        "required": [
          "status",
          "timestamp",
          "error_count",
          "warning_count",
          "frontend_errors",
          "backend_errors",
          "db_connected",
          "summary"
        ],
        "title": "HealthCheckResponse",
        "description": "Health check response"
      },
      "HeartbeatRequest": {
        "properties": {
          "session_id": {
            "type": "integer",
            "title": "Session Id"
          },
          "max_sentence_reached": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Sentence Reached",
            "default": 0
          },
          "total_active_seconds": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Active Seconds",
            "default": 0
          },
          "total_idle_seconds": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Idle Seconds",
            "default": 0
          },
          "scroll_jump_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Scroll Jump Count",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "session_id"
        ],
        "title": "HeartbeatRequest"
      },
      "ItunesSearchResult": {
        "properties": {
          "itunes_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Itunes Id"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "author": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Author"
          },
          "rss_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rss Url"
          },
          "artwork_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Artwork Url"
          },
          "genre": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Genre"
          },
          "episode_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Episode Count"
          },
          "is_subscribed": {
            "type": "boolean",
            "title": "Is Subscribed",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "title"
        ],
        "title": "ItunesSearchResult"
      },
      "LDOCEAudio": {
        "properties": {
          "bre_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bre Url",
            "description": "British English audio URL"
          },
          "ame_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ame Url",
            "description": "American English audio URL"
          }
        },
        "type": "object",
        "title": "LDOCEAudio",
        "description": "Audio URLs for British and American English pronunciations."
      },
      "LDOCECollocation": {
        "properties": {
          "pattern": {
            "type": "string",
            "title": "Pattern",
            "description": "Collocation pattern like 'simmer gently'"
          },
          "part_of_speech": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Part Of Speech",
            "description": "Part of speech category (ADVERB, VERB, etc.)"
          },
          "examples": {
            "items": {
              "$ref": "#/components/schemas/LDOCEExample"
            },
            "type": "array",
            "title": "Examples",
            "description": "Usage examples"
          }
        },
        "type": "object",
        "required": [
          "pattern"
        ],
        "title": "LDOCECollocation",
        "description": "Word collocation pattern with examples."
      },
      "LDOCEEntry": {
        "properties": {
          "headword": {
            "type": "string",
            "title": "Headword",
            "description": "The word being defined"
          },
          "hyphenation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hyphenation",
            "description": "Word with syllable breaks"
          },
          "homnum": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Homnum",
            "description": "Homograph number (1, 2, etc.) for words like simmer1, simmer2"
          },
          "pronunciation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pronunciation",
            "description": "IPA pronunciation"
          },
          "pronunciation_ame": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pronunciation Ame",
            "description": "American English variant pronunciation"
          },
          "part_of_speech": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Part Of Speech",
            "description": "Part of speech (verb, noun, adjective)"
          },
          "inflections": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inflections",
            "description": "Inflected forms (e.g. 'plural grogs', 'past tense went')"
          },
          "audio": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/LDOCEAudio"
              },
              {
                "type": "null"
              }
            ],
            "description": "Audio pronunciations"
          },
          "senses": {
            "items": {
              "$ref": "#/components/schemas/LDOCESense"
            },
            "type": "array",
            "title": "Senses",
            "description": "List of meanings"
          },
          "phrasal_verbs": {
            "items": {
              "$ref": "#/components/schemas/LDOCEPhrasalVerb"
            },
            "type": "array",
            "title": "Phrasal Verbs",
            "description": "Related phrasal verbs"
          },
          "etymology": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/LDOCEEtymology"
              },
              {
                "type": "null"
              }
            ],
            "description": "Word origin information"
          },
          "verb_table": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/LDOCEVerbTable"
              },
              {
                "type": "null"
              }
            ],
            "description": "Verb conjugation table (for verbs)"
          },
          "extra_examples": {
            "items": {
              "$ref": "#/components/schemas/LDOCEExtraExample"
            },
            "type": "array",
            "title": "Extra Examples",
            "description": "Examples from other dictionaries/corpus"
          },
          "thesaurus": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/LDOCEThesaurus"
              },
              {
                "type": "null"
              }
            ],
            "description": "Thesaurus entries and word sets"
          },
          "collocations": {
            "items": {
              "$ref": "#/components/schemas/LDOCECollocation"
            },
            "type": "array",
            "title": "Collocations",
            "description": "Collocations from corpus"
          }
        },
        "type": "object",
        "required": [
          "headword"
        ],
        "title": "LDOCEEntry",
        "description": "A complete dictionary entry for a word (one part of speech).\n\nA word like 'simmer' may have multiple entries: verb entry and noun entry."
      },
      "LDOCEEtymology": {
        "properties": {
          "century": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Century",
            "description": "Time period like '1600-1700'"
          },
          "origin": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Origin",
            "description": "Origin word like 'simper'"
          },
          "meaning": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Meaning",
            "description": "Original meaning like 'to simmer'"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note",
            "description": "Additional notes like 'perhaps from the sound'"
          }
        },
        "type": "object",
        "title": "LDOCEEtymology",
        "description": "Word origin/etymology information."
      },
      "LDOCEExample": {
        "properties": {
          "text": {
            "type": "string",
            "title": "Text",
            "description": "Example sentence in English"
          },
          "translation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Translation",
            "description": "Chinese translation"
          },
          "audio_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Url",
            "description": "Audio URL for example"
          }
        },
        "type": "object",
        "required": [
          "text"
        ],
        "title": "LDOCEExample",
        "description": "Example sentence with translation and optional audio."
      },
      "LDOCEExtraExample": {
        "properties": {
          "text": {
            "type": "string",
            "title": "Text",
            "description": "Example sentence text"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Source: 'OTHER_DICTIONARIES' or 'CORPUS'"
          }
        },
        "type": "object",
        "required": [
          "text",
          "source"
        ],
        "title": "LDOCEExtraExample",
        "description": "Example from other dictionaries or corpus."
      },
      "LDOCEPhrasalVerb": {
        "properties": {
          "phrase": {
            "type": "string",
            "title": "Phrase",
            "description": "Phrasal verb like 'simmer down'"
          },
          "definition": {
            "type": "string",
            "title": "Definition",
            "description": "Definition in English"
          },
          "definition_cn": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Definition Cn",
            "description": "Chinese translation"
          },
          "examples": {
            "items": {
              "$ref": "#/components/schemas/LDOCEExample"
            },
            "type": "array",
            "title": "Examples",
            "description": "Example sentences"
          }
        },
        "type": "object",
        "required": [
          "phrase",
          "definition"
        ],
        "title": "LDOCEPhrasalVerb",
        "description": "Phrasal verb entry."
      },
      "LDOCESense": {
        "properties": {
          "index": {
            "type": "integer",
            "title": "Index",
            "description": "Sense number (1, 2, 3...)"
          },
          "definition": {
            "type": "string",
            "title": "Definition",
            "description": "Definition in English"
          },
          "definition_cn": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Definition Cn",
            "description": "Chinese translation of definition"
          },
          "grammar": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grammar",
            "description": "Grammar pattern like '[intransitive, transitive]'"
          },
          "examples": {
            "items": {
              "$ref": "#/components/schemas/LDOCEExample"
            },
            "type": "array",
            "title": "Examples",
            "description": "Example sentences"
          },
          "collocations": {
            "items": {
              "$ref": "#/components/schemas/LDOCECollocation"
            },
            "type": "array",
            "title": "Collocations",
            "description": "Collocations from this sense"
          }
        },
        "type": "object",
        "required": [
          "index",
          "definition"
        ],
        "title": "LDOCESense",
        "description": "A single sense/meaning of a word."
      },
      "LDOCEThesaurus": {
        "properties": {
          "topic": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Topic",
            "description": "Topic heading like 'ways of cooking'"
          },
          "entries": {
            "items": {
              "$ref": "#/components/schemas/LDOCEThesaurusEntry"
            },
            "type": "array",
            "title": "Entries",
            "description": "Related words with definitions"
          },
          "word_sets": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Word Sets",
            "description": "Words in the word set category"
          }
        },
        "type": "object",
        "title": "LDOCEThesaurus",
        "description": "Thesaurus section with related words and word sets."
      },
      "LDOCEThesaurusEntry": {
        "properties": {
          "word": {
            "type": "string",
            "title": "Word",
            "description": "Related word like 'boil', 'fry', 'bake'"
          },
          "definition": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Definition",
            "description": "Definition of the related word"
          },
          "examples": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Examples",
            "description": "Example sentences"
          }
        },
        "type": "object",
        "required": [
          "word"
        ],
        "title": "LDOCEThesaurusEntry",
        "description": "Related word from thesaurus."
      },
      "LDOCEVerbForm": {
        "properties": {
          "tense": {
            "type": "string",
            "title": "Tense",
            "description": "Tense name like 'Present', 'Past', 'Present perfect'"
          },
          "person": {
            "type": "string",
            "title": "Person",
            "description": "Person like 'I, you, we, they' or 'he, she, it'"
          },
          "form": {
            "type": "string",
            "title": "Form",
            "description": "Conjugated form like 'simmer', 'simmers', 'simmered'"
          },
          "auxiliary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auxiliary",
            "description": "Auxiliary verb like 'have', 'has', 'will'"
          }
        },
        "type": "object",
        "required": [
          "tense",
          "person",
          "form"
        ],
        "title": "LDOCEVerbForm",
        "description": "A single verb form in the conjugation table."
      },
      "LDOCEVerbTable": {
        "properties": {
          "lemma": {
            "type": "string",
            "title": "Lemma",
            "description": "Base form of the verb"
          },
          "simple_forms": {
            "items": {
              "$ref": "#/components/schemas/LDOCEVerbForm"
            },
            "type": "array",
            "title": "Simple Forms",
            "description": "Simple tense forms"
          },
          "continuous_forms": {
            "items": {
              "$ref": "#/components/schemas/LDOCEVerbForm"
            },
            "type": "array",
            "title": "Continuous Forms",
            "description": "Continuous tense forms"
          }
        },
        "type": "object",
        "required": [
          "lemma"
        ],
        "title": "LDOCEVerbTable",
        "description": "Complete verb conjugation table."
      },
      "LDOCEWord": {
        "properties": {
          "word": {
            "type": "string",
            "title": "Word",
            "description": "The queried word"
          },
          "found": {
            "type": "boolean",
            "title": "Found",
            "description": "Whether the word was found"
          },
          "entries": {
            "items": {
              "$ref": "#/components/schemas/LDOCEEntry"
            },
            "type": "array",
            "title": "Entries",
            "description": "Dictionary entries (one per POS)"
          },
          "raw_html": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Raw Html",
            "description": "Original HTML (for debugging)"
          }
        },
        "type": "object",
        "required": [
          "word",
          "found"
        ],
        "title": "LDOCEWord",
        "description": "Complete response for an LDOCE dictionary lookup.\n\nContains multiple entries when a word has different parts of speech\n(e.g., 'simmer' as verb and as noun).",
        "example": {
          "entries": [
            {
              "collocations": [
                {
                  "part_of_speech": "ADVERB",
                  "pattern": "simmer gently"
                },
                {
                  "part_of_speech": "ADVERB",
                  "pattern": "simmer down"
                }
              ],
              "etymology": {
                "century": "1600-1700",
                "meaning": "'to simmer'",
                "note": "perhaps from the sound",
                "origin": "simper"
              },
              "extra_examples": [
                {
                  "source": "OTHER_DICTIONARIES",
                  "text": "Simmer the macaroni in lightly salted water."
                },
                {
                  "source": "CORPUS",
                  "text": "Let the soup simmer for 10 minutes."
                }
              ],
              "headword": "simmer",
              "homnum": 1,
              "part_of_speech": "verb",
              "phrasal_verbs": [
                {
                  "definition": "to become calm again after you have been very angry",
                  "definition_cn": "\u3014\u76db\u6012\u540e\u3015\u5e73\u9759\u4e0b\u6765\uff0c\u51b7\u9759\u4e0b\u6765",
                  "phrase": "simmer down"
                }
              ],
              "pronunciation": "\u02c8s\u026am\u0259",
              "senses": [
                {
                  "definition": "to boil gently, or to cook something slowly by boiling it gently",
                  "definition_cn": "\u3014\u7528\u6587\u706b\u3015\u6162\u6162\u5730\u716e\uff0c\u7168\uff0c\u7096",
                  "examples": [
                    {
                      "text": "Bring the soup to the boil and allow it to simmer gently for about half an hour.",
                      "translation": "\u628a\u6c64\u716e\u5f00\uff0c\u7136\u540e\u7528\u6587\u706b\u7096\u534a\u5c0f\u65f6\u5de6\u53f3\u3002"
                    }
                  ],
                  "grammar": "[intransitive, transitive]",
                  "index": 1
                }
              ],
              "thesaurus": {
                "entries": [
                  {
                    "definition": "to cook food in very hot water",
                    "word": "boil"
                  },
                  {
                    "definition": "to cook food in hot oil, butter, or fat",
                    "word": "fry"
                  }
                ],
                "topic": "ways of cooking"
              }
            },
            {
              "headword": "simmer",
              "homnum": 2,
              "part_of_speech": "noun",
              "senses": [
                {
                  "definition": "when something is boiling gently",
                  "definition_cn": "\u6162\u6162\u6cb8\u817e\u7684\u72b6\u6001\uff0c\u6587\u706b\u6162\u716e\uff0c\u5c0f\u6cb8",
                  "index": 1
                }
              ]
            }
          ],
          "found": true,
          "word": "simmer"
        }
      },
      "LastSessionResponse": {
        "properties": {
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "source_type": {
            "type": "string",
            "title": "Source Type"
          },
          "last_studied_at": {
            "type": "string",
            "title": "Last Studied At"
          }
        },
        "type": "object",
        "required": [
          "source_id",
          "source_type",
          "last_studied_at"
        ],
        "title": "LastSessionResponse"
      },
      "LearningStatus": {
        "type": "string",
        "enum": [
          "unseen",
          "learning",
          "mastered"
        ],
        "title": "LearningStatus",
        "description": "\u5b66\u4e60\u72b6\u6001"
      },
      "ListeningSessionRequest": {
        "properties": {
          "episode_id": {
            "type": "integer",
            "title": "Episode Id"
          }
        },
        "type": "object",
        "required": [
          "episode_id"
        ],
        "title": "ListeningSessionRequest"
      },
      "ListeningSessionUpdateRequest": {
        "properties": {
          "session_id": {
            "type": "integer",
            "title": "Session Id"
          },
          "total_listened_seconds": {
            "type": "integer",
            "title": "Total Listened Seconds"
          },
          "last_position_seconds": {
            "type": "number",
            "title": "Last Position Seconds"
          },
          "is_finished": {
            "type": "boolean",
            "title": "Is Finished",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "total_listened_seconds",
          "last_position_seconds"
        ],
        "title": "ListeningSessionUpdateRequest"
      },
      "LogEntryResponse": {
        "properties": {
          "timestamp": {
            "type": "string",
            "title": "Timestamp"
          },
          "source": {
            "type": "string",
            "title": "Source"
          },
          "level": {
            "type": "string",
            "title": "Level"
          },
          "category": {
            "type": "string",
            "title": "Category"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "data": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data"
          }
        },
        "type": "object",
        "required": [
          "timestamp",
          "source",
          "level",
          "category",
          "message"
        ],
        "title": "LogEntryResponse",
        "description": "A log entry in the health check response"
      },
      "MemoryCurveDebugBucket": {
        "properties": {
          "day": {
            "type": "integer",
            "title": "Day"
          },
          "interval_range": {
            "type": "string",
            "title": "Interval Range"
          },
          "sample_size": {
            "type": "integer",
            "title": "Sample Size"
          },
          "success_count": {
            "type": "integer",
            "title": "Success Count"
          },
          "retention_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Retention Rate"
          }
        },
        "type": "object",
        "required": [
          "day",
          "interval_range",
          "sample_size",
          "success_count",
          "retention_rate"
        ],
        "title": "MemoryCurveDebugBucket",
        "description": "Debug info for a memory curve bucket."
      },
      "MemoryCurveDebugLog": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "review_item_id": {
            "type": "integer",
            "title": "Review Item Id"
          },
          "interval_at_review": {
            "type": "number",
            "title": "Interval At Review"
          },
          "quality": {
            "type": "integer",
            "title": "Quality"
          },
          "reviewed_at": {
            "type": "string",
            "title": "Reviewed At"
          },
          "duration_ms": {
            "type": "integer",
            "title": "Duration Ms"
          },
          "sentence_preview": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sentence Preview"
          }
        },
        "type": "object",
        "required": [
          "id",
          "review_item_id",
          "interval_at_review",
          "quality",
          "reviewed_at",
          "duration_ms"
        ],
        "title": "MemoryCurveDebugLog",
        "description": "Debug info for a single review log."
      },
      "MemoryCurveDebugResponse": {
        "properties": {
          "total_logs": {
            "type": "integer",
            "title": "Total Logs"
          },
          "interval_distribution": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Interval Distribution"
          },
          "buckets": {
            "items": {
              "$ref": "#/components/schemas/MemoryCurveDebugBucket"
            },
            "type": "array",
            "title": "Buckets"
          },
          "recent_logs": {
            "items": {
              "$ref": "#/components/schemas/MemoryCurveDebugLog"
            },
            "type": "array",
            "title": "Recent Logs"
          },
          "summary": {
            "additionalProperties": true,
            "type": "object",
            "title": "Summary"
          }
        },
        "type": "object",
        "required": [
          "total_logs",
          "interval_distribution",
          "buckets",
          "recent_logs",
          "summary"
        ],
        "title": "MemoryCurveDebugResponse",
        "description": "Debug response for memory curve analysis."
      },
      "MemoryCurvePoint": {
        "properties": {
          "days_since_first_review": {
            "type": "integer",
            "title": "Days Since First Review"
          },
          "retention_rate": {
            "type": "number",
            "title": "Retention Rate"
          }
        },
        "type": "object",
        "required": [
          "days_since_first_review",
          "retention_rate"
        ],
        "title": "MemoryCurvePoint",
        "description": "A point on the memory curve."
      },
      "MemoryCurveResponse": {
        "properties": {
          "theoretical": {
            "items": {
              "$ref": "#/components/schemas/MemoryCurvePoint"
            },
            "type": "array",
            "title": "Theoretical"
          },
          "actual": {
            "items": {
              "$ref": "#/components/schemas/MemoryCurvePoint"
            },
            "type": "array",
            "title": "Actual"
          },
          "total_reviews": {
            "type": "integer",
            "title": "Total Reviews"
          },
          "successful_reviews": {
            "type": "integer",
            "title": "Successful Reviews"
          }
        },
        "type": "object",
        "required": [
          "theoretical",
          "actual",
          "total_reviews",
          "successful_reviews"
        ],
        "title": "MemoryCurveResponse",
        "description": "Memory curve statistics."
      },
      "NegotiationContext": {
        "properties": {
          "target_content": {
            "type": "string",
            "title": "Target Content",
            "description": "The sentence or word being discussed"
          },
          "source_type": {
            "type": "string",
            "title": "Source Type",
            "description": "dictionary, rss, podcast, story"
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata",
            "description": "Extra metadata like original article ID, etc."
          },
          "focus_words": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Focus Words",
            "description": "Specific words identified as difficult"
          },
          "definition": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Definition",
            "description": "The dictionary definition of the word/sense"
          },
          "part_of_speech": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Part Of Speech",
            "description": "The POS tag (e.g. verb, noun)"
          },
          "translation_hint": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Translation Hint",
            "description": "The existing translation for reference"
          }
        },
        "type": "object",
        "required": [
          "target_content",
          "source_type"
        ],
        "title": "NegotiationContext",
        "description": "The context of what is being negotiated."
      },
      "NegotiationRequest": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "user_intention": {
            "$ref": "#/components/schemas/UserIntention"
          },
          "context": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/NegotiationContext"
              },
              {
                "type": "null"
              }
            ]
          },
          "user_audio_transcript": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Audio Transcript"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "user_intention"
        ],
        "title": "NegotiationRequest",
        "description": "Request from the UI/Voice Layer."
      },
      "NegotiationResponse": {
        "properties": {
          "audio_text": {
            "type": "string",
            "title": "Audio Text",
            "description": "The text to be spoken by TTS"
          },
          "display_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Text",
            "description": "Text to be shown (if user requested scaffold)"
          },
          "next_step": {
            "$ref": "#/components/schemas/NegotiationStep"
          },
          "should_listen": {
            "type": "boolean",
            "title": "Should Listen",
            "description": "Whether to open mic after speaking",
            "default": true
          },
          "visual_aids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Visual Aids",
            "description": "Images or diagrams if available"
          }
        },
        "type": "object",
        "required": [
          "audio_text",
          "next_step"
        ],
        "title": "NegotiationResponse",
        "description": "Response to the UI/Voice Layer."
      },
      "NegotiationStep": {
        "type": "string",
        "enum": [
          "original",
          "explain_en",
          "explain_cn",
          "verify"
        ],
        "title": "NegotiationStep",
        "description": "The current step in the recursive negotiation loop."
      },
      "OPMLImportResult": {
        "properties": {
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "imported": {
            "type": "integer",
            "title": "Imported"
          },
          "skipped": {
            "type": "integer",
            "title": "Skipped"
          },
          "errors": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Errors"
          }
        },
        "type": "object",
        "required": [
          "total",
          "imported",
          "skipped",
          "errors"
        ],
        "title": "OPMLImportResult"
      },
      "OverviewRequest": {
        "properties": {
          "title": {
            "type": "string",
            "title": "Title"
          },
          "full_text": {
            "type": "string",
            "title": "Full Text"
          },
          "total_sentences": {
            "type": "integer",
            "title": "Total Sentences"
          }
        },
        "type": "object",
        "required": [
          "title",
          "full_text",
          "total_sentences"
        ],
        "title": "OverviewRequest",
        "description": "Request to generate article overview with context."
      },
      "PasswordChange": {
        "properties": {
          "current_password": {
            "type": "string",
            "title": "Current Password"
          },
          "new_password": {
            "type": "string",
            "maxLength": 128,
            "minLength": 8,
            "title": "New Password"
          }
        },
        "type": "object",
        "required": [
          "current_password",
          "new_password"
        ],
        "title": "PasswordChange",
        "description": "Change password while logged in."
      },
      "PrefetchCollocationsRequest": {
        "properties": {
          "sentences": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Sentences"
          }
        },
        "type": "object",
        "required": [
          "sentences"
        ],
        "title": "PrefetchCollocationsRequest",
        "description": "Request to prefetch collocations for upcoming sentences."
      },
      "PreviewRequest": {
        "properties": {
          "rss_url": {
            "type": "string",
            "title": "Rss Url"
          }
        },
        "type": "object",
        "required": [
          "rss_url"
        ],
        "title": "PreviewRequest"
      },
      "ProfileResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "total_sentences_studied": {
            "type": "integer",
            "title": "Total Sentences Studied"
          },
          "clear_count": {
            "type": "integer",
            "title": "Clear Count"
          },
          "unclear_count": {
            "type": "integer",
            "title": "Unclear Count"
          },
          "clear_rate": {
            "type": "number",
            "title": "Clear Rate"
          },
          "vocab_gap_count": {
            "type": "integer",
            "title": "Vocab Gap Count"
          },
          "grammar_gap_count": {
            "type": "integer",
            "title": "Grammar Gap Count"
          },
          "meaning_gap_count": {
            "type": "integer",
            "title": "Meaning Gap Count"
          },
          "collocation_gap_count": {
            "type": "integer",
            "title": "Collocation Gap Count"
          },
          "words_to_review": {
            "items": {
              "$ref": "#/components/schemas/WordToReview"
            },
            "type": "array",
            "title": "Words To Review"
          },
          "insights": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Insights"
          },
          "recommendation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recommendation"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "total_sentences_studied",
          "clear_count",
          "unclear_count",
          "clear_rate",
          "vocab_gap_count",
          "grammar_gap_count",
          "meaning_gap_count",
          "collocation_gap_count",
          "words_to_review",
          "insights"
        ],
        "title": "ProfileResponse",
        "description": "User comprehension profile stats."
      },
      "RecordRequest": {
        "properties": {
          "source_type": {
            "type": "string",
            "title": "Source Type"
          },
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "sentence_index": {
            "type": "integer",
            "title": "Sentence Index"
          },
          "sentence_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sentence Text"
          },
          "initial_response": {
            "type": "string",
            "title": "Initial Response"
          },
          "unclear_choice": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unclear Choice"
          },
          "simplified_response": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Simplified Response"
          },
          "word_clicks": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Word Clicks",
            "default": []
          },
          "phrase_clicks": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Phrase Clicks",
            "default": []
          },
          "dwell_time_ms": {
            "type": "integer",
            "title": "Dwell Time Ms",
            "default": 0
          },
          "word_count": {
            "type": "integer",
            "title": "Word Count",
            "default": 0
          },
          "max_simplify_stage": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Simplify Stage"
          },
          "user_id": {
            "type": "string",
            "title": "User Id",
            "default": "default_user"
          },
          "interaction_events": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Interaction Events",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "source_type",
          "source_id",
          "sentence_index",
          "initial_response"
        ],
        "title": "RecordRequest"
      },
      "RefreshTokenRequest": {
        "properties": {
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token"
          }
        },
        "type": "object",
        "required": [
          "refresh_token"
        ],
        "title": "RefreshTokenRequest",
        "description": "Request new access token using refresh token."
      },
      "RemoteLog": {
        "properties": {
          "level": {
            "type": "string",
            "title": "Level"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data"
          },
          "timestamp": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Timestamp"
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category"
          }
        },
        "type": "object",
        "required": [
          "level",
          "message"
        ],
        "title": "RemoteLog",
        "description": "Log entry from frontend"
      },
      "ReviewContextResponse": {
        "properties": {
          "previous_sentence": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Previous Sentence"
          },
          "target_sentence": {
            "type": "string",
            "title": "Target Sentence"
          },
          "next_sentence": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Sentence"
          },
          "source_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Title"
          },
          "chapter_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Title"
          }
        },
        "type": "object",
        "required": [
          "target_sentence"
        ],
        "title": "ReviewContextResponse",
        "description": "Context for a review item."
      },
      "ReviewQueueResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/app__api__routers__review__ReviewQueueItem"
            },
            "type": "array",
            "title": "Items"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "items",
          "count"
        ],
        "title": "ReviewQueueResponse",
        "description": "Response with review queue items."
      },
      "ReviewRequest": {
        "properties": {
          "record_id": {
            "type": "integer",
            "title": "Record Id"
          },
          "result": {
            "type": "string",
            "title": "Result"
          }
        },
        "type": "object",
        "required": [
          "record_id",
          "result"
        ],
        "title": "ReviewRequest",
        "description": "Request to complete a review."
      },
      "ReviewScheduleItem": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "text": {
            "type": "string",
            "title": "Text"
          },
          "next_review_at": {
            "type": "string",
            "format": "date-time",
            "title": "Next Review At"
          },
          "ef": {
            "type": "number",
            "title": "Ef"
          },
          "interval": {
            "type": "number",
            "title": "Interval"
          },
          "repetition": {
            "type": "integer",
            "title": "Repetition"
          },
          "last_review": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Review"
          }
        },
        "type": "object",
        "required": [
          "id",
          "text",
          "next_review_at",
          "ef",
          "interval",
          "repetition"
        ],
        "title": "ReviewScheduleItem"
      },
      "ReviewScheduleResponse": {
        "properties": {
          "schedule": {
            "additionalProperties": {
              "items": {
                "$ref": "#/components/schemas/ReviewScheduleItem"
              },
              "type": "array"
            },
            "type": "object",
            "title": "Schedule"
          }
        },
        "type": "object",
        "required": [
          "schedule"
        ],
        "title": "ReviewScheduleResponse"
      },
      "SimplifyRequest": {
        "properties": {
          "sentence": {
            "type": "string",
            "title": "Sentence"
          },
          "simplify_type": {
            "type": "string",
            "title": "Simplify Type"
          },
          "stage": {
            "type": "integer",
            "title": "Stage",
            "default": 1
          },
          "prev_sentence": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prev Sentence"
          },
          "next_sentence": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Sentence"
          }
        },
        "type": "object",
        "required": [
          "sentence",
          "simplify_type"
        ],
        "title": "SimplifyRequest"
      },
      "StartSessionResponse": {
        "properties": {
          "session_id": {
            "type": "integer",
            "title": "Session Id"
          }
        },
        "type": "object",
        "required": [
          "session_id"
        ],
        "title": "StartSessionResponse"
      },
      "StudyHighlightsResponse": {
        "properties": {
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "word_clicks": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Word Clicks"
          },
          "phrase_clicks": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Phrase Clicks"
          },
          "unclear_sentences": {
            "items": {
              "$ref": "#/components/schemas/UnclearSentenceInfo"
            },
            "type": "array",
            "title": "Unclear Sentences",
            "default": []
          },
          "studied_count": {
            "type": "integer",
            "title": "Studied Count"
          },
          "clear_count": {
            "type": "integer",
            "title": "Clear Count"
          },
          "is_complete": {
            "type": "boolean",
            "title": "Is Complete"
          }
        },
        "type": "object",
        "required": [
          "source_id",
          "word_clicks",
          "phrase_clicks",
          "studied_count",
          "clear_count",
          "is_complete"
        ],
        "title": "StudyHighlightsResponse",
        "description": "All words/phrases looked up during study of an article."
      },
      "StudyProgressResponse": {
        "properties": {
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "studied_count": {
            "type": "integer",
            "title": "Studied Count"
          },
          "clear_count": {
            "type": "integer",
            "title": "Clear Count"
          },
          "unclear_count": {
            "type": "integer",
            "title": "Unclear Count"
          },
          "current_index": {
            "type": "integer",
            "title": "Current Index"
          }
        },
        "type": "object",
        "required": [
          "source_id",
          "studied_count",
          "clear_count",
          "unclear_count",
          "current_index"
        ],
        "title": "StudyProgressResponse"
      },
      "SubscribeRequest": {
        "properties": {
          "rss_url": {
            "type": "string",
            "title": "Rss Url"
          }
        },
        "type": "object",
        "required": [
          "rss_url"
        ],
        "title": "SubscribeRequest"
      },
      "SweepPayload": {
        "properties": {
          "swept_words": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Swept Words"
          },
          "inspected_words": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Inspected Words"
          },
          "book_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Book Code"
          }
        },
        "type": "object",
        "required": [
          "swept_words",
          "inspected_words"
        ],
        "title": "SweepPayload"
      },
      "TokenResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "default": "bearer"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "refresh_token",
          "expires_in"
        ],
        "title": "TokenResponse",
        "description": "JWT token pair response."
      },
      "UnclearSentenceInfo": {
        "properties": {
          "sentence_index": {
            "type": "integer",
            "title": "Sentence Index"
          },
          "unclear_choice": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unclear Choice"
          },
          "max_simplify_stage": {
            "type": "integer",
            "title": "Max Simplify Stage",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "sentence_index"
        ],
        "title": "UnclearSentenceInfo",
        "description": "Info about an unclear sentence for highlighting."
      },
      "UpdateLearningStatusRequest": {
        "properties": {
          "status": {
            "$ref": "#/components/schemas/LearningStatus"
          },
          "user_id": {
            "type": "string",
            "title": "User Id",
            "default": "default_user"
          }
        },
        "type": "object",
        "required": [
          "status"
        ],
        "title": "UpdateLearningStatusRequest",
        "description": "\u66f4\u65b0\u5b66\u4e60\u72b6\u6001\u7684\u8bf7\u6c42"
      },
      "UpdateSessionRequest": {
        "properties": {
          "session_id": {
            "type": "integer",
            "title": "Session Id"
          },
          "total_active_seconds": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Active Seconds"
          },
          "word_lookup_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Word Lookup Count"
          },
          "words_looked_up": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Words Looked Up"
          },
          "got_it_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Got It Count"
          },
          "example_navigation_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Example Navigation Count"
          },
          "audio_play_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Play Count"
          }
        },
        "type": "object",
        "required": [
          "session_id"
        ],
        "title": "UpdateSessionRequest"
      },
      "UserIntention": {
        "type": "string",
        "enum": [
          "continue",
          "huh",
          "abort"
        ],
        "title": "UserIntention",
        "description": "The user's non-verbal signal."
      },
      "UserLogin": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "UserLogin",
        "description": "User login request. Supports login via email."
      },
      "UserProfileUpdate": {
        "properties": {
          "username": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50,
                "minLength": 3
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          }
        },
        "type": "object",
        "title": "UserProfileUpdate",
        "description": "Update user profile."
      },
      "UserRegister": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "maxLength": 128,
            "minLength": 8,
            "title": "Password"
          },
          "username": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50,
                "minLength": 3
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "UserRegister",
        "description": "User registration request."
      },
      "UserResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          },
          "role": {
            "type": "string",
            "title": "Role",
            "default": "user"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "default": true
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "created_at"
        ],
        "title": "UserResponse",
        "description": "Public user information returned to client."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "VoiceTokenRequest": {
        "properties": {
          "topic": {
            "type": "string",
            "title": "Topic"
          },
          "mission_context": {
            "type": "string",
            "title": "Mission Context"
          },
          "tense": {
            "type": "string",
            "title": "Tense"
          }
        },
        "type": "object",
        "required": [
          "topic",
          "mission_context",
          "tense"
        ],
        "title": "VoiceTokenRequest"
      },
      "WordBookResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "code": {
            "type": "string",
            "title": "Code"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          }
        },
        "type": "object",
        "required": [
          "id",
          "code",
          "name",
          "description"
        ],
        "title": "WordBookResponse"
      },
      "WordClickRequest": {
        "properties": {
          "session_id": {
            "type": "integer",
            "title": "Session Id"
          }
        },
        "type": "object",
        "required": [
          "session_id"
        ],
        "title": "WordClickRequest"
      },
      "WordContextProgress": {
        "properties": {
          "word": {
            "type": "string",
            "title": "Word"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "default": 0
          },
          "mastered": {
            "type": "integer",
            "title": "Mastered",
            "default": 0
          },
          "learning": {
            "type": "integer",
            "title": "Learning",
            "default": 0
          },
          "unseen": {
            "type": "integer",
            "title": "Unseen",
            "default": 0
          },
          "contexts": {
            "items": {
              "$ref": "#/components/schemas/ContextResource"
            },
            "type": "array",
            "title": "Contexts"
          }
        },
        "type": "object",
        "required": [
          "word"
        ],
        "title": "WordContextProgress",
        "description": "\u5355\u8bcd\u8bed\u5883\u5b66\u4e60\u8fdb\u5ea6\u7edf\u8ba1"
      },
      "WordProficiencyResponse": {
        "properties": {
          "word": {
            "type": "string",
            "title": "Word"
          },
          "exposure_count": {
            "type": "integer",
            "title": "Exposure Count"
          },
          "huh_count": {
            "type": "integer",
            "title": "Huh Count"
          },
          "difficulty_score": {
            "type": "number",
            "title": "Difficulty Score"
          },
          "status": {
            "type": "string",
            "title": "Status"
          }
        },
        "type": "object",
        "required": [
          "word",
          "exposure_count",
          "huh_count",
          "difficulty_score",
          "status"
        ],
        "title": "WordProficiencyResponse"
      },
      "WordToReview": {
        "properties": {
          "word": {
            "type": "string",
            "title": "Word"
          },
          "difficulty_score": {
            "type": "number",
            "title": "Difficulty Score"
          },
          "exposure_count": {
            "type": "integer",
            "title": "Exposure Count"
          }
        },
        "type": "object",
        "required": [
          "word",
          "difficulty_score",
          "exposure_count"
        ],
        "title": "WordToReview",
        "description": "A word that needs practice."
      },
      "WordUpdatePayload": {
        "properties": {
          "word": {
            "type": "string",
            "title": "Word"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "default": "mastered"
          }
        },
        "type": "object",
        "required": [
          "word"
        ],
        "title": "WordUpdatePayload"
      },
      "app__api__routers__reading__EndSessionRequest": {
        "properties": {
          "session_id": {
            "type": "integer",
            "title": "Session Id"
          },
          "max_sentence_reached": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Sentence Reached",
            "default": 0
          },
          "total_active_seconds": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Active Seconds",
            "default": 0
          },
          "total_idle_seconds": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Idle Seconds",
            "default": 0
          },
          "scroll_jump_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Scroll Jump Count",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "session_id"
        ],
        "title": "EndSessionRequest"
      },
      "app__api__routers__reading__StartSessionRequest": {
        "properties": {
          "source_type": {
            "type": "string",
            "title": "Source Type"
          },
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "article_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Article Title"
          },
          "total_word_count": {
            "type": "integer",
            "title": "Total Word Count"
          },
          "total_sentences": {
            "type": "integer",
            "title": "Total Sentences"
          }
        },
        "type": "object",
        "required": [
          "source_type",
          "source_id",
          "total_word_count",
          "total_sentences"
        ],
        "title": "StartSessionRequest"
      },
      "app__api__routers__review__ReviewQueueItem": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "sentence_index": {
            "type": "integer",
            "title": "Sentence Index"
          },
          "sentence_text": {
            "type": "string",
            "title": "Sentence Text"
          },
          "highlighted_items": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Highlighted Items"
          },
          "difficulty_type": {
            "type": "string",
            "title": "Difficulty Type"
          },
          "interval_days": {
            "type": "number",
            "title": "Interval Days"
          },
          "repetition": {
            "type": "integer",
            "title": "Repetition"
          },
          "next_review_at": {
            "type": "string",
            "title": "Next Review At"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "source_id",
          "sentence_index",
          "sentence_text",
          "highlighted_items",
          "difficulty_type",
          "interval_days",
          "repetition",
          "next_review_at",
          "created_at"
        ],
        "title": "ReviewQueueItem",
        "description": "Item in the review queue."
      },
      "app__api__routers__voice_session__EndSessionRequest": {
        "properties": {
          "session_id": {
            "type": "integer",
            "title": "Session Id"
          },
          "total_active_seconds": {
            "type": "integer",
            "title": "Total Active Seconds"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "total_active_seconds"
        ],
        "title": "EndSessionRequest"
      },
      "app__api__routers__voice_session__StartSessionRequest": {
        "properties": {
          "source_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Type"
          },
          "source_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Id"
          }
        },
        "type": "object",
        "title": "StartSessionRequest"
      },
      "app__models__sentence_study_schemas__ReviewQueueItem": {
        "properties": {
          "record_id": {
            "type": "integer",
            "title": "Record Id"
          },
          "source_type": {
            "type": "string",
            "title": "Source Type"
          },
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "sentence_index": {
            "type": "integer",
            "title": "Sentence Index"
          },
          "sentence_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sentence Text"
          },
          "diagnosed_gap_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Diagnosed Gap Type"
          },
          "scheduled_review": {
            "type": "string",
            "title": "Scheduled Review"
          },
          "review_count": {
            "type": "integer",
            "title": "Review Count"
          }
        },
        "type": "object",
        "required": [
          "record_id",
          "source_type",
          "source_id",
          "sentence_index",
          "sentence_text",
          "diagnosed_gap_type",
          "scheduled_review",
          "review_count"
        ],
        "title": "ReviewQueueItem",
        "description": "Item in the review queue."
      }
    },
    "securitySchemes": {
      "OAuth2PasswordBearer": {
        "type": "oauth2",
        "flows": {
          "password": {
            "scopes": {},
            "tokenUrl": "/api/auth/token"
          }
        }
      }
    }
  }
}
